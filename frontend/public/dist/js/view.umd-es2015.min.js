!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){(function(t){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function u(t){t.attr("stroke","white").attr("stroke-width","1px").attr("stroke-dasharray","5,3")}function a(t){t.each(function(t,n){var e=(0,f.select)(this).selectAll("text").data([t]);e=e.enter().append("text").attr("stroke","white").attr("stroke-width","0.9px").style("font-size","10px").merge(e),e.text(t[2])})}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(8),l=e(9),f=e(10),h=(e(11),function(n){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.controller.subscribe("footprint",t.onFootprint.bind(t)),t.controller.subscribe("history",t.onHistory.bind(t)),t._zoomed=!1,t._links=[],t._points=[],t._geo=(0,l.html)("empty").onClick(t.onClick.bind(t)),(0,f.select)("#map").datum({url:"https://static.redsift.io/thirdparty/topojson/examples/world-110m.json"}).call(t._geo),t}return o(e,n),s(e,[{key:"onClick",value:function(n,e,r){var i=this._geo;t.log(this._points),this._zoomed?i.zoom(1).zoomX(null).zoomY(null):i.zoom(4).zoomX(r[0]).zoomY(r[1]),(0,f.select)("#map").transition().duration(750).call(i),this._zoomed=!this._zoomed}},{key:"presentView",value:function(n){t.log("email-demo: presentView: ",n),this.onFootprint(n.data)}},{key:"willPresentView",value:function(n){t.log("email-demo: willPresentView: ",n)}},{key:"onFootprint",value:function(n){t.log("email-demo: onFootprint: ",n),Object.keys(n).forEach(function(t){document.getElementById(t).textContent=n[t]})}},{key:"onHistory",value:function(n){var e=JSON.parse(n.history);t.log("email-demo: onHistory: ",e);var r=[],i=[];e.forEach(function(t){i.push([t.source.longitude,t.source.latitude,t.destination.longitude,t.destination.latitude]),r.push([t.source.longitude,t.source.latitude,t.source.code],[t.destination.longitude,t.destination.latitude,t.destination.code])}),this._links=i,this._points=r,this._geo.links(i).linksDisplay(u).points(r).pointsDisplay(a),(0,f.select)("#map").call(this._geo)}}]),e}(c.SiftView));n.default=h,(0,c.registerSiftView)(new h(window))}).call(n,e(1))},function(t,n,e){(function(n){function r(){}function i(){h.log.apply(h,arguments)}function o(){h.log.apply(h,arguments)}function u(){h.warn.apply(h,arguments)}function a(t){y[t]=v()}function s(t){var n=y[t];if(!n)throw new Error("No such label: "+t);var e=v()-n;h.log(t+": "+e+"ms")}function c(){var t=new Error;t.name="Trace",t.message=p.format.apply(null,arguments),h.error(t.stack)}function l(t){h.log(p.inspect(t)+"\n")}function f(t){if(!t){var n=_.call(arguments,1);d.ok(!1,p.format.apply(null,n))}}var h,p=e(2),d=e(6),v=e(7),_=Array.prototype.slice,y={};h="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var g=[[r,"log"],[i,"info"],[o,"warn"],[u,"error"],[a,"time"],[s,"timeEnd"],[c,"trace"],[l,"dir"],[f,"assert"]],m=0;m<g.length;m++){var w=g[m],x=w[0],b=w[1];h[b]||(h[b]=x)}t.exports=h}).call(n,function(){return this}())},function(t,n,e){(function(t,r,i){function o(t,e){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),_(e)?r.showHidden=e:e&&n._extend(r,e),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,t,r.depth)}function u(t,n){var e=o.styles[n];return e?"["+o.colors[e][0]+"m"+t+"["+o.colors[e][1]+"m":t}function a(t,n){return t}function s(t){var n={};return t.forEach(function(t,e){n[t]=!0}),n}function c(t,e,r){if(t.customInspect&&e&&A(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return w(i)||(i=c(t,i,r)),i}var o=l(t,e);if(o)return o;var u=Object.keys(e),a=s(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(e)),M(e)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(e);if(0===u.length){if(A(e)){var _=e.name?": "+e.name:"";return t.stylize("[Function"+_+"]","special")}if(k(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(M(e))return f(e)}var y="",g=!1,m=["{","}"];if(v(e)&&(g=!0,m=["[","]"]),A(e)){var x=e.name?": "+e.name:"";y=" [Function"+x+"]"}if(k(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),M(e)&&(y=" "+f(e)),0===u.length&&(!g||0==e.length))return m[0]+y+m[1];if(r<0)return k(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var b;return b=g?h(t,e,r,a,u):u.map(function(n){return p(t,e,r,a,n,g)}),t.seen.pop(),d(b,y,m)}function l(t,n){if(b(n))return t.stylize("undefined","undefined");if(w(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return m(n)?t.stylize(""+n,"number"):_(n)?t.stylize(""+n,"boolean"):y(n)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,n,e,r,i){for(var o=[],u=0,a=n.length;u<a;++u)P(n,String(u))?o.push(p(t,n,e,r,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,n,e,r,i,!0))}),o}function p(t,n,e,r,i,o){var u,a,s;if(s=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]},s.get?a=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(a=t.stylize("[Setter]","special")),P(r,i)||(u="["+i+"]"),a||(t.seen.indexOf(s.value)<0?(a=y(e)?c(t,s.value,null):c(t,s.value,e-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),b(u)){if(o&&i.match(/^\d+$/))return a;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function d(t,n,e){var r=0,i=t.reduce(function(t,n){return r++,n.indexOf("\n")>=0&&r++,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+n+" "+t.join(", ")+" "+e[1]}function v(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function w(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function b(t){return void 0===t}function k(t){return E(t)&&"[object RegExp]"===j(t)}function E(t){return"object"==typeof t&&null!==t}function S(t){return E(t)&&"[object Date]"===j(t)}function M(t){return E(t)&&("[object Error]"===j(t)||t instanceof Error)}function A(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function j(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,n=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":");return[t.getDate(),z[t.getMonth()],n].join(" ")}function P(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var C=/%[sdj%]/g;n.format=function(t){if(!w(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(o(arguments[e]));return n.join(" ")}for(var e=1,r=arguments,i=r.length,u=String(t).replace(C,function(t){if("%%"===t)return"%";if(e>=i)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}}),a=r[e];e<i;a=r[++e])u+=y(a)||!E(a)?" "+a:" "+o(a);return u},n.deprecate=function(e,o){function u(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?i.trace(o):i.error(o),a=!0}return e.apply(this,arguments)}if(b(t.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(r.noDeprecation===!0)return e;var a=!1;return u};var I,q={};n.debuglog=function(t){if(b(I)&&(I=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!q[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var e=r.pid;q[t]=function(){var r=n.format.apply(n,arguments);i.error("%s %d: %s",t,e,r)}}else q[t]=function(){};return q[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=v,n.isBoolean=_,n.isNull=y,n.isNullOrUndefined=g,n.isNumber=m,n.isString=w,n.isSymbol=x,n.isUndefined=b,n.isRegExp=k,n.isObject=E,n.isDate=S,n.isError=M,n.isFunction=A,n.isPrimitive=T,n.isBuffer=e(4);var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){i.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=e(5),n._extend=function(t,n){if(!n||!E(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(n,function(){return this}(),e(3),e(1))},function(t,n){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(n){try{return l.call(null,t,0)}catch(n){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(n){try{return f.call(null,t)}catch(n){return f.call(this,t)}}}function u(){v&&p&&(v=!1,p.length?d=p.concat(d):_=-1,d.length&&a())}function a(){if(!v){var t=i(u);v=!0;for(var n=d.length;n;){for(p=d,d=[];++_<n;)p&&p[_].run();_=-1,n=d.length}p=null,v=!1,o(t)}}function s(t,n){this.fun=t,this.array=n}function c(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(t){l=e}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,d=[],v=!1,_=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];d.push(new s(t,n)),1!==d.length||v||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n,e){(function(n){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function r(t,n){if(t===n)return 0;for(var e=t.length,r=n.length,i=0,o=Math.min(e,r);i<o;++i)if(t[i]!==n[i]){e=t[i],r=n[i];break}return e<r?-1:r<e?1:0}function i(t){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function u(t){return!i(t)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function a(t){if(w.isFunction(t)){if(k)return t.name;var n=t.toString(),e=n.match(S);return e&&e[1]}}function s(t,n){return"string"==typeof t?t.length<n?t:t.slice(0,n):t}function c(t){if(k||!w.isFunction(t))return w.inspect(t);var n=a(t),e=n?": "+n:"";return"[Function"+e+"]"}function l(t){return s(c(t.actual),128)+" "+t.operator+" "+s(c(t.expected),128)}function f(t,n,e,r,i){throw new E.AssertionError({message:e,actual:t,expected:n,operator:r,stackStartFunction:i})}function h(t,n){t||f(t,!0,n,"==",E.ok)}function p(t,n,e,a){if(t===n)return!0;if(i(t)&&i(n))return 0===r(t,n);if(w.isDate(t)&&w.isDate(n))return t.getTime()===n.getTime();if(w.isRegExp(t)&&w.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(u(t)&&u(n)&&o(t)===o(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(i(t)!==i(n))return!1;a=a||{actual:[],expected:[]};var s=a.actual.indexOf(t);return s!==-1&&s===a.expected.indexOf(n)||(a.actual.push(t),a.expected.push(n),v(t,n,e,a))}return e?t===n:t==n}function d(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,n,e,r){if(null===t||void 0===t||null===n||void 0===n)return!1;if(w.isPrimitive(t)||w.isPrimitive(n))return t===n;if(e&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(n))return!1;var i=d(t),o=d(n);if(i&&!o||!i&&o)return!1;if(i)return t=b.call(t),n=b.call(n),p(t,n,e);var u,a,s=M(t),c=M(n);if(s.length!==c.length)return!1;for(s.sort(),c.sort(),a=s.length-1;a>=0;a--)if(s[a]!==c[a])return!1;for(a=s.length-1;a>=0;a--)if(u=s[a],!p(t[u],n[u],e,r))return!1;return!0}function _(t,n,e){p(t,n,!0)&&f(t,n,e,"notDeepStrictEqual",_)}function y(t,n){if(!t||!n)return!1;if("[object RegExp]"==Object.prototype.toString.call(n))return n.test(t);try{if(t instanceof n)return!0}catch(t){}return!Error.isPrototypeOf(n)&&n.call({},t)===!0}function g(t){var n;try{t()}catch(t){n=t}return n}function m(t,n,e,r){var i;if("function"!=typeof n)throw new TypeError('"block" argument must be a function');"string"==typeof e&&(r=e,e=null),i=g(n),r=(e&&e.name?" ("+e.name+").":".")+(r?" "+r:"."),t&&!i&&f(i,e,"Missing expected exception"+r);var o="string"==typeof r,u=!t&&w.isError(i),a=!t&&i&&!e;if((u&&o&&y(i,e)||a)&&f(i,e,"Got unwanted exception"+r),t&&i&&e&&!y(i,e)||!t&&i)throw i}var w=e(2),x=Object.prototype.hasOwnProperty,b=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),E=t.exports=h,S=/\s*function\s+([^\(\s]*)\s*/;E.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var n=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var e=new Error;if(e.stack){var r=e.stack,i=a(n),o=r.indexOf("\n"+i);if(o>=0){var u=r.indexOf("\n",o+1);r=r.substring(u+1)}this.stack=r}}},w.inherits(E.AssertionError,Error),E.fail=f,E.ok=h,E.equal=function(t,n,e){t!=n&&f(t,n,e,"==",E.equal)},E.notEqual=function(t,n,e){t==n&&f(t,n,e,"!=",E.notEqual)},E.deepEqual=function(t,n,e){p(t,n,!1)||f(t,n,e,"deepEqual",E.deepEqual)},E.deepStrictEqual=function(t,n,e){p(t,n,!0)||f(t,n,e,"deepStrictEqual",E.deepStrictEqual)},E.notDeepEqual=function(t,n,e){p(t,n,!1)&&f(t,n,e,"notDeepEqual",E.notDeepEqual)},E.notDeepStrictEqual=_,E.strictEqual=function(t,n,e){t!==n&&f(t,n,e,"===",E.strictEqual)},E.notStrictEqual=function(t,n,e){t===n&&f(t,n,e,"!==",E.notStrictEqual)},E.throws=function(t,n,e){m(!0,t,n,e)},E.doesNotThrow=function(t,n,e){m(!1,t,n,e)},E.ifError=function(t){if(t)throw t};var M=Object.keys||function(t){var n=[];for(var e in t)x.call(t,e)&&n.push(e);return n}}).call(n,function(){return this}())},function(t,n){function e(){return(new Date).getTime()}t.exports=e},function(t,n,e){var r,i;(function(t,o){!function(t,e){e(n)}(this,function(n){function u(t,n){return n={exports:{}},t(n,n.exports),n.exports}function a(t){Q.trace("[opCreateDb]: ",t);var n={};switch(t.type){case"MSG":n.msg=J("rs_msg_db-"+t.accountGuid,y(tt));break;case"SIFT":if(!t.siftGuid)throw new Error("[opCreateDb]: dbInfo.siftGuid undefined");Q.trace("[opCreateDb]: creating SIFT db");var e=_(t.schema,!0);e=e.addStore("_user.default").addStore("_redsift"),n.db=J(t.siftGuid+"-"+t.accountGuid,e),n.msg=J("rs_msg_db-"+t.accountGuid,y(tt));break;case"SYNC":Q.trace("[opCreateDb]: creating SYNC db"),n.db=J("rs_sync_log-"+t.accountGuid,_(nt));break;case"CLIENT":n.db=J("rs_client_db-"+t.clientName,_(et));break;default:throw new Error("[opCreateDb]: unsupported db type: "+t.type)}return n}function s(t,n,e){if(Q.trace("[opDel]: ",n,e),!n.bucket)return Promise.reject("[opDel]: params.bucket undefined");if(!n.keys||0===n.keys.length)return Q.trace("[opDel]: params.keys undefined"),Promise.resolve();if(Z.indexOf(n.bucket)!==-1){var r=n.keys.map(function(t){return e+"/"+t});return g(t.msg,{bucket:n.bucket,keys:r})}return g(t.db,n)}function c(t,n,e){if(Q.trace("[opGet]: ",n),!n.bucket)return Promise.reject("[opGet]: params.bucket undefined");if(!n.keys||0===n.keys.length)return Promise.reject("[opGet]: param.keys undefined");if(Z.indexOf(n.bucket)!==-1){var r=n.keys.map(function(t){return e+"/"+t});return x(t.msg,{bucket:n.bucket,keys:r}).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})})}return x(t.db,n)}function l(t,n,e){return Q.trace("[opGetAll]: ",n,e),n.bucket?Z.indexOf(n.bucket)!==-1?b(t.msg,{bucket:n.bucket,index:"sift.guid",range:e},!0).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})}):b(t.db,n,!0):Promise.reject("[opGetAll]: params.bucket undefined")}function f(t,n,e){return Q.trace("[opGetAllKeys]: ",n,e),n.bucket?Z.indexOf(n.bucket)!==-1?b(t.msg,{bucket:n.bucket,index:"sift.guid",range:e},!1).then(function(t){return t.map(function(t){return t.key.split("/")[1]})}):b(t.db,n,!1):Promise.reject("[opGetAllKeys]: params.bucket undefined")}function h(t,n,e){return Q.trace("[opGetIndex]: ",n,e),n.bucket?Z.indexOf(n.bucket)!==-1?b(t.msg,{bucket:n.bucket,index:"sift.guid",range:e},!0).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})}):n.index?b(t.db,n,!0):Promise.reject("[opGetIndex]:params.index undefined"):Promise.reject("[opGetIndex]:params.bucket undefined")}function p(t,n,e){return Q.trace("[opGetIndexKeys]: ",n,e),n.bucket?Z.indexOf(n.bucket)!==-1?b(t.msg,{bucket:n.bucket,index:"sift.guid",range:e},!1).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})}):n.index?b(t.db,n,!1):Promise.reject("[opGetIndexKeys]: params.index undefined"):Promise.reject("[opGetIndexKeys]: params.bucket undefined")}function d(t,n,e){if(Q.trace("[opGetWithIndex]: ",n,e),!n.bucket)return Promise.reject("[opGetWithIndex]:params.bucket undefined");if(!n.keys)return Promise.reject("[opGetWithIndex]:params.keys undefined");if(Z.indexOf(n.bucket)!==-1){var r=n.keys.map(function(t){return e+"/"+t});return w(t.msg,{bucket:n.bucket,keys:r,index:"sift.guid",range:e}).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})})}return n.index?n.range?w(t.db,n):Promise.reject("[opGetWithIndex]:params.range undefined"):Promise.reject("[opGetWithIndex]:params.index undefined")}function v(t,n,e,r){Q.trace("[opPut]: ",n,e,r);var i=t.db;if(!n.bucket)return Promise.reject("[opPut]: params.bucket undefined");if(!n.kvs||0===n.kvs.length)return Q.warn("[opPut]: params.kvs undefined"),Promise.resolve();var o=n.kvs;if(e||(o=o.map(function(t){return{key:t.key,value:{value:t.value}}})),Z.indexOf(n.bucket)!==-1){i=t.msg;var o=o.map(function(t){return{key:r+"/"+t.key,value:t.value}})}return m(i,{bucket:n.bucket,kvs:o},e)}function _(t,n){Q.trace("[_getTreoSchema]: ",t,n);var e=J.schema().version(1);return t.forEach(function(t){n&&Z.indexOf(t.name)!==-1||(e=t.keypath?e.addStore(t.name,{key:t.keypath}):e.addStore(t.name),t.indexes&&t.indexes.forEach(function(t){e=e.addIndex(t,t,{unique:!1})}))}),e}function y(t,n){Q.trace("[_getVersionedTreoSchema]: ",t,n);var e=J.schema();return t.forEach(function(t,r){e=e.version(r+1),t.forEach(function(t){n&&Z.indexOf(t.name)!==-1||(t.drop?(Q.trace("[_getVersionedTreoSchema]: dropping store: ",t.name),e=e.dropStore(t.name)):e=t.keypath?e.addStore(t.name,{key:t.keypath}):e.addStore(t.name),t.indexes&&t.indexes.forEach(function(n){t.drop?(Q.trace("[_getVersionedTreoSchema]: dropping store/index: "+t.name+"/"+n),e=e.dropIndex(n)):e=e.addIndex(n,n,{unique:!1})}))})}),e}function g(t,n){return Q.trace("[_batchDelete]: ",n),new Promise(function(e,r){t.transaction("readwrite",[n.bucket],function(t,i){if(t)return r(t);var o=i.objectStore(n.bucket),u=0,a=function(){if(!(u>=n.keys.length)){var t,e=n.keys[u];t=o.delete(e),t.onerror=r,t.onsuccess=a,u+=1}};i.onerror=i.onabort=r,i.oncomplete=function(){e()},a()})})}function m(t,n){return Q.trace("[_batchPut]: ",n),new Promise(function(e,r){var i=n.kvs.length;t.transaction("readwrite",[n.bucket],function(t,o){if(t)return r(t);var u=o.objectStore(n.bucket),a=0,s=function(){if(!(a>=i)){Q.trace("[_batchPut: put: ",n.kvs[a]);var t;t=u.put(n.kvs[a].value,n.kvs[a].key),t.onerror=r,t.onsuccess=s,a+=1}};o.onerror=o.onabort=r,o.oncomplete=function(){e()},s()})})}function w(t,n){return Q.trace("[_getWithIndexRange]: ",n),new Promise(function(e,r){var i=t.store(n.bucket),o=[],u=0,a=function(t){var e=n.keys.indexOf(t.primaryKey);return e!==-1&&(Q.trace("[found key: ",t.primaryKey),o[e].value=t.value.value,u++),u===n.keys.length?s():void t.continue()},s=function(t){Q.trace("[_getWithIndexRange: result: ",o),t?r(t):e(o)};n.keys.forEach(function(t){o.push({key:t,value:void 0})}),i.cursor({index:n.index,range:n.range,iterator:a},s)})}function x(t,n){return Q.trace("[_findIn]: ",n),new Promise(function(e,r){var i=t.store(n.bucket),o=[],u=0,a=function(t){if(Q.trace("[_findIn]: iterator: ",t),t.key>c[u]){for(Q.trace("[_findIn]: cursor ahead: ",t.key,c[u]);t.key>c[u]&&u<c.length;)u+=1,Q.trace("[_findIn]: moving to next key: ",t.key,c[u]);if(u>c.length)return Q.trace("[_findIn]: exhausted keys. done."),s()}t.key===c[u]?(Q.trace("[_findIn]: found key: ",t.key,t.value),o[n.keys.indexOf(c[u])]={key:t.key,value:t.value.value},u+=1,u<c.length?t.continue(c[u]):s()):(Q.trace("[_findIn]: continuing to next key: ",c[u]),t.continue(c[u]))},s=function(t){Q.trace("[findIn]: result: ",o),t?r(t):e(o)},c=n.keys.slice();c=c.sort(J.cmp),Q.trace("[findIn: sorted keys: ",c),n.keys.forEach(function(t){o.push({key:t,value:void 0})}),i.cursor({iterator:a},s)})}function b(t,n,e){return Q.trace("[_getAll]: ",n,e),new Promise(function(r,i){var o=[],u=[],a=t.store(n.bucket),s=function(t){var r={key:t.primaryKey};Q.trace("[_getAll]: cursor",t),e&&(r.value=t.value.value),n.index&&(r.index=t.key),o.push(r),u.push(t.primaryKey),t.continue()},c={iterator:s};n.index&&(c.index=n.index),n.range&&(c.range=n.range),a.cursor(c,function(t){t?i(t):n.index||n.range||e?(Q.trace("[_getAll]: resolving: ",o),r(o)):(Q.trace("[_getAll]: resolving: ",u),r(u))})})}function k(n){t.log("[Redsift::registerSiftView]: registered")}function E(t){return j(P,t)}function S(t){return j(ut,t)}function M(n){t.log("[Redsift::registerSiftController]: registered")}function A(t){return j(N,t)}function T(n){t.log("[Redsift::registerEmailClientController]: registered")}function j(t,n){var e=function(){t.call(this),this.init&&"function"==typeof this.init&&this.init()};return e.prototype=Object.create(t.prototype),e.constructor=e,Object.keys(n).forEach(function(t){e.prototype[t]=n[t]}),new e}var N=function(){this._proxy=self,this._registerMessageListeners()};N.prototype._registerMessageListeners=function(){var t=this;this._proxy&&(this._proxy.onmessage=function(n){var e=n.data.method;t["_"+e]&&t["_"+e](n.data.params)})},N.prototype._emailStats=function(t){this.onstats&&this.onstats(t.name,t.value)},N.prototype._getThreadRowDisplayInfo=function(t){var n=this,e={};t.tris.forEach(function(r){void 0!==r.value&&void 0!==r.value.list&&n.loadThreadListView&&(e[r.key]=n.loadThreadListView(r.value.list,t.supportedTemplates))}),this._proxy.postMessage({method:"getThreadRowDisplayInfoCallback",params:e})};var O=function(){this._observers=[]};O.prototype.subscribe=function(t,n){this._op("_sub",t,n)},O.prototype.unsubscribe=function(t,n){this._op("_unsub",t,n)},O.prototype.unsubscribeAll=function(t){this._observers[t]&&delete this._observers[t]},O.prototype.publish=function(t,n){this._op("_pub",t,n)},O.prototype._op=function(t,n,e){var r=this;Array.isArray(n)?n.forEach(function(n){r[t](n,e)}):this[t](n,e)},O.prototype._sub=function(t,n){this._observers[t]||(this._observers[t]=[]),n&&this._observers[t].indexOf(n)===-1&&this._observers[t].push(n)},O.prototype._unsub=function(t,n){if(this._observers[t]){var e=this._observers[t].indexOf(n);~e&&this._observers[t].splice(e,1)}},O.prototype._pub=function(t,n){var e=this;if(this._observers[t])for(var r=this._observers[t].length-1;r>=0;r--)e._observers[t][r](n)};var P=function(){this._resizeHandler=null,this._proxy=parent,this.controller=new O,this._registerMessageListeners()};P.prototype.publish=function(t,n){this._proxy.postMessage({method:"notifyController",params:{topic:t,value:n}},"*")},P.prototype._registerMessageListeners=function(){var n=this;window.addEventListener("message",function(e){var r=e.data.method,i=e.data.params;"notifyView"===r?n.controller.publish(i.topic,i.value):n[r]?n[r](i):t.warn("[SiftView]: method not implemented: ",r)},!1)};var C=function(t){function n(n){t.call(this),this._proxy=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.goto=function(t){this._postMessage("goto",t)},n.prototype.close=function(){this._postMessage("close")},n.prototype._postMessage=function(t,n){this._proxy.postMessage({method:"notifyClient",params:{topic:t,value:n}})},n}(O),I=function(t){function n(){t.call(this),this._storage=null}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.init=function(t){this._storage=t},n.prototype.get=function(t){return this._storage.get(t)},n.prototype.getIndexKeys=function(t){return this._storage.getIndexKeys(t)},n.prototype.getIndex=function(t){return this._storage.getIndex(t)},n.prototype.getWithIndex=function(t){return this._storage.getWithIndex(t)},n.prototype.getAllKeys=function(t){return this._storage.getAllKeys(t)},n.prototype.getAll=function(t){return this._storage.getAll(t)},n.prototype.getUser=function(t){return this._storage.getUser(t)},n.prototype.putUser=function(t){return this._storage.putUser(t)},n.prototype.delUser=function(t){return this._storage.delUser(t)},n}(O),q="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:{},z=u(function(o){!function(t,u){"use strict";r=u,i="function"==typeof r?r.call(n,e,n,o):r,!(void 0!==i&&(o.exports=i))}(q,function(){"use strict";function n(n){return typeof t!==s&&(void 0!==t[n]?e(t,n):void 0!==t.log?e(t,"log"):a)}function e(t,n){var e=t[n];if("function"==typeof e.bind)return e.bind(t);try{return Function.prototype.bind.call(e,t)}catch(n){return function(){return Function.prototype.apply.apply(e,[t,arguments])}}}function r(n,e,r){return function(){typeof t!==s&&(i.call(this,e,r),this[n].apply(this,arguments))}}function i(t,n){for(var e=this,r=0;r<c.length;r++){var i=c[r];e[i]=r<t?a:e.methodFactory(i,t,n)}}function o(t,e,i){return n(t)||r.apply(this,arguments)}function u(n,e,r){function u(t){var n=(c[t]||"silent").toUpperCase();try{return void(window.localStorage[h]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(t){}}function a(){var t;try{t=window.localStorage[h]}catch(t){}if(typeof t===s)try{var n=window.document.cookie,e=n.indexOf(encodeURIComponent(h)+"=");e&&(t=/^([^;]+)/.exec(n.slice(e))[1])}catch(t){}return void 0===f.levels[t]&&(t=void 0),t}var l,f=this,h="loglevel";n&&(h+=":"+n),f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=r||o,f.getLevel=function(){return l},f.setLevel=function(e,r){if("string"==typeof e&&void 0!==f.levels[e.toUpperCase()]&&(e=f.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=f.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(l=e,r!==!1&&u(e),i.call(f,e,n),typeof t===s&&e<f.levels.SILENT)return"No console available for logging"},f.setDefaultLevel=function(t){a()||f.setLevel(t,!1)},f.enableAll=function(t){f.setLevel(f.levels.TRACE,t)},f.disableAll=function(t){f.setLevel(f.levels.SILENT,t)};var p=a();null==p&&(p=null==e?"WARN":e),f.setLevel(p,!1)}var a=function(){},s="undefined",c=["trace","debug","info","warn","error"],l=new u,f={};l.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var n=f[t];return n||(n=f[t]=new u(t,l.getLevel(),l.methodFactory)),n};var h=typeof window!==s?window.log:void 0;return l.noConflict=function(){return typeof window!==s&&window.log===l&&(window.log=h),l},l})}),R=z&&"object"==typeof z&&"default"in z?z.default:z,L=u(function(t){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===n.call(t)&&(e=Object.getPrototypeOf(t),null===e||e===Object.getPrototypeOf({}))}}),D=L&&"object"==typeof L&&"default"in L?L.default:L,V=u(function(t,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function r(t){var n=q.IDBKeyRange||q.webkitIDBKeyRange;if(t instanceof n)return t;if("undefined"==typeof t||null===t)return null;if(!(0,o.default)(t))return n.only(t);var e=Object.keys(t).sort();if(1===e.length){var r=e[0],i=t[r];switch(r){case"eq":return n.only(i);case"gt":return n.lowerBound(i,!0);case"lt":return n.upperBound(i,!0);case"gte":return n.lowerBound(i);case"lte":return n.upperBound(i);default:throw new TypeError('"'+r+'" is not valid key')}}else{var u=t[e[0]],a=t[e[1]],s=e.join("-");switch(s){case"gt-lt":return n.bound(u,a,!0,!0);case"gt-lte":return n.bound(u,a,!0,!1);case"gte-lt":return n.bound(u,a,!1,!0);case"gte-lte":return n.bound(u,a,!1,!1);default:throw new TypeError('"'+s+'" are conflicted keys')}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var i=D,o=e(i);t.exports=n.default}),B=V&&"object"==typeof V&&"default"in V?V.default:V,F=u(function(t){function n(t,n,e,r){this.store=t,this.name=n,this.field=e,this.opts=r,this.multi=r.multi||r.multiEntry||!1,this.unique=r.unique||!1}var e=B;t.exports=n,n.prototype.get=function(t,n){function e(t){r.push(t.value),t.continue()}var r=[],i=this.unique,o={range:t,iterator:e};this.cursor(o,function(t){return t?n(t):void(i?n(null,r[0]):n(null,r))})},n.prototype.count=function(t,n){var r=this.store.name,i=this.name;this.store.db.transaction("readonly",[r],function(o,u){if(o)return n(o);var a=u.objectStore(r).index(i),s=a.count(e(t));s.onerror=n,s.onsuccess=function(t){n(null,t.target.result)}})},n.prototype.cursor=function(t,n){t.index=this.name,this.store.cursor(t,n)}}),G=F&&"object"==typeof F&&"default"in F?F.default:F,U=u(function(t){var n=Object.prototype.toString;t.exports=function(t){switch(n.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!==t?"nan":t&&1===t.nodeType?"element":(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t),typeof t)}}),H=U&&"object"==typeof U&&"default"in U?U.default:U,X=u(function(t){function n(t,n){this.db=null,this.name=t,this.indexes={},this.opts=n,this.key=n.key||n.keyPath||void 0,this.increment=n.increment||n.autoIncretement||void 0}var e=H,r=B;t.exports=n,n.prototype.index=function(t){return this.indexes[t]},n.prototype.put=function(t,n,r){var i=this.name,o=this.key;o&&("object"==e(t)?(r=n,n=t,t=null):n[o]=t),this.db.transaction("readwrite",[i],function(e,u){if(e)return r(e);var a=u.objectStore(i),s=o?a.put(n):a.put(n,t);u.onerror=u.onabort=s.onerror=r,u.oncomplete=function(){r(null,s.result)}})},n.prototype.get=function(t,n){var e=this.name;this.db.transaction("readonly",[e],function(r,i){if(r)return n(r);var o=i.objectStore(e),u=o.get(t);u.onerror=n,u.onsuccess=function(t){n(null,t.target.result)}})},n.prototype.del=function(t,n){var e=this.name;this.db.transaction("readwrite",[e],function(r,i){if(r)return n(r);var o=i.objectStore(e),u=o.delete(t);i.onerror=i.onabort=u.onerror=n,i.oncomplete=function(){n()}})},n.prototype.count=function(t){var n=this.name;this.db.transaction("readonly",[n],function(e,r){if(e)return t(e);var i=r.objectStore(n),o=i.count();o.onerror=t,o.onsuccess=function(n){t(null,n.target.result)}})},n.prototype.clear=function(t){var n=this.name;this.db.transaction("readwrite",[n],function(e,r){if(e)return t(e);var i=r.objectStore(n),o=i.clear();r.onerror=r.onabort=o.onerror=t,r.oncomplete=function(){t()}})},n.prototype.batch=function(t,n){var e=this.name,r=this.key,i=Object.keys(t);this.db.transaction("readwrite",[e],function(o,u){function a(){if(!(c>=i.length)){var e,o=i[c],u=t[o];null===u?e=s.delete(o):r?(u[r]||(u[r]=o),e=s.put(u)):e=s.put(u,o),e.onerror=n,e.onsuccess=a,c+=1}}if(o)return n(o);var s=u.objectStore(e),c=0;u.onerror=u.onabort=n,u.oncomplete=function(){n()},a()})},n.prototype.all=function(t){function n(t){e.push(t.value),t.continue()}var e=[];this.cursor({iterator:n},function(n){n?t(n):t(null,e)})},n.prototype.cursor=function(t,n){var e=this.name;this.db.transaction("readonly",[e],function(i,o){if(i)return n(i);var u=t.index?o.objectStore(e).index(t.index):o.objectStore(e),a=u.openCursor(r(t.range));a.onerror=n,a.onsuccess=function(e){var r=e.target.result;r?t.iterator(r):n()}})}}),W=X&&"object"==typeof X&&"default"in X?X.default:X,K=u(function(t){function n(){return this instanceof n?(this._stores={},this._current={},void(this._versions={})):new n}var e=H,r=W,i=G;t.exports=n,n.prototype.version=function(t){if("number"!=e(t)||t<1||t<this.getVersion())throw new TypeError("not valid version");return this._current={version:t,store:null},this._versions[t]={stores:[],dropStores:[],indexes:[],dropIndexes:[],version:t},this},n.prototype.addStore=function(t,n){if("string"!=e(t))throw new TypeError("`name` is required");if(this._stores[t])throw new TypeError("store is already defined");var i=new r(t,n||{});return this._stores[t]=i,this._versions[this.getVersion()].stores.push(i),this._current.store=i,this},n.prototype.dropStore=function(t){if("string"!=e(t))throw new TypeError("`name` is required");var n=this._stores[t];if(!n)throw new TypeError("store is not defined");return delete this._stores[t],this._versions[this.getVersion()].dropStores.push(n),this},n.prototype.addIndex=function(t,n,r){if("string"!=e(t))throw new TypeError("`name` is required");if("string"!=e(n)&&"array"!=e(n))throw new TypeError("`field` is required");var o=this._current.store;if(o.indexes[t])throw new TypeError("index is already defined");var u=new i(o,t,n,r||{});return o.indexes[t]=u,this._versions[this.getVersion()].indexes.push(u),this},n.prototype.dropIndex=function(t){if("string"!=e(t))throw new TypeError("`name` is required");var n=this._current.store.indexes[t];if(!n)throw new TypeError("index is not defined");return delete this._current.store.indexes[t],this._versions[this.getVersion()].dropIndexes.push(n),this},n.prototype.getStore=function(t){if("string"!=e(t))throw new TypeError("`name` is required");if(!this._stores[t])throw new TypeError("store is not defined");return this._current.store=this._stores[t],this},n.prototype.getVersion=function(){return this._current.version},n.prototype.callback=function(){var t=Object.keys(this._versions).map(function(t){return this._versions[t]},this).sort(function(t,n){return t.version-n.version});return function(n){var e=n.target.result,r=n.target.transaction;t.forEach(function(t){n.oldVersion>=t.version||(t.stores.forEach(function(t){var n={};"undefined"!=typeof t.key&&(n.keyPath=t.key),"undefined"!=typeof t.increment&&(n.autoIncrement=t.increment),e.createObjectStore(t.name,n)}),t.dropStores.forEach(function(t){e.deleteObjectStore(t.name)}),t.indexes.forEach(function(t){var n=r.objectStore(t.store.name);n.createIndex(t.name,t.field,{unique:t.unique,multiEntry:t.multi})}),t.dropIndexes.forEach(function(t){var n=r.objectStore(t.store.name);n.deleteIndex(t.name)}))})}}}),Y=K&&"object"==typeof K&&"default"in K?K.default:K,$=u(function(t,n){function e(t,n){if(!(this instanceof e))return new e(t,n);if("string"!=o(t))throw new TypeError("`name` required");if(!(n instanceof u))throw new TypeError("not valid schema");this.name=t,this.status="close",this.origin=null,this.stores=n._stores,this.version=n.getVersion(),this.onupgradeneeded=n.callback(),Object.keys(this.stores).forEach(function(t){this.stores[t].db=this},this)}function r(){return i().cmp.apply(i(),arguments)}function i(){return q._indexedDB||q.indexedDB||q.msIndexedDB||q.mozIndexedDB||q.webkitIndexedDB}var o=H,u=Y,a=W,s=G;n=t.exports=e,n.schema=u,n.cmp=r,n.Treo=e,n.Schema=u,n.Store=a,n.Index=s,e.prototype.use=function(t){return t(this,n),this},e.prototype.drop=function(t){var n=this.name;this.close(function(e){if(e)return t(e);var r=i().deleteDatabase(n);r.onerror=t,r.onsuccess=function(){t()}})},e.prototype.close=function(t){return"close"==this.status?t():void this.getInstance(function(n,e){return n?t(n):(e.origin=null,e.status="close",e.close(),void t())})},e.prototype.store=function(t){return this.stores[t]},e.prototype.getInstance=function(t){if("open"==this.status)return t(null,this.origin);if("opening"==this.status)return this.queue.push(t);this.status="opening",this.queue=[t];var n=this,e=i().open(this.name,this.version);e.onupgradeneeded=this.onupgradeneeded,e.onerror=e.onblocked=function(t){n.status="error",n.queue.forEach(function(n){n(t)}),delete n.queue},e.onsuccess=function(t){n.origin=t.target.result,n.status="open",n.origin.onversionchange=function(){n.close(function(){})},n.queue.forEach(function(t){t(null,n.origin)}),delete n.queue}},e.prototype.transaction=function(t,n,e){this.getInstance(function(r,i){r?e(r):e(null,i.transaction(n,t))})}}),J=$&&"object"==typeof $&&"default"in $?$.default:$,Q=R.getLogger("RSStorage:operations");Q.setLevel("warn");var Z=["_email.id","_email.tid"],tt=[[{name:"_id.list",indexes:["sift.guid"]},{name:"_tid.list",indexes:["sift.guid"]}],[{name:"_email.id",indexes:["sift.guid"]},{name:"_email.tid",indexes:["sift.guid"]},{name:"_id.list",drop:!0},{name:"_tid.list",drop:!0}]],nt=[{name:"events",indexes:["value.sift.guid"]},{name:"admin"}],et=[{name:"tour"},{name:"spm"},{name:"auth"}],rt=new WeakMap,it=new WeakMap,ot=function(t,n){if(this._logger=R.getLogger("RSStorage"),this._logger.setLevel(n||"warn"),!t.accountGuid)throw new Error("[Storage]: dbInfo.accountGuid undefined");rt.set(this,t.siftGuid),it.set(this,a(t))};ot.prototype.get=function(t){return this._logger.trace("[Storage::get]: ",t),c(it.get(this),t,rt.get(this))},ot.prototype.getAll=function(t){return this._logger.trace("[Storage::getAll]: ",t),l(it.get(this),t,rt.get(this))},ot.prototype.getAllKeys=function(t){return this._logger.trace("[Storage::getAllKeys]: ",t),f(it.get(this),t,rt.get(this))},ot.prototype.getIndex=function(t){return this._logger.trace("[Storage::getIndex]: ",t),h(it.get(this),t,rt.get(this))},ot.prototype.getIndexKeys=function(t){return this._logger.trace("[Storage::getIndexKeys]: ",t),p(it.get(this),t,rt.get(this))},ot.prototype.getWithIndex=function(t){return this._logger.trace("[Storage::getWithIndex]: ",t),d(it.get(this),t,rt.get(this))},ot.prototype.delUser=function(t){return t.bucket="_user.default",this._logger.trace("[Storage::delUser]: ",t),s(it.get(this),t,rt.get(this))},ot.prototype.getUser=function(t){return t.bucket="_user.default",this._logger.trace("[Storage::getUser]: ",t),c(it.get(this),t,rt.get(this))},ot.prototype.putUser=function(t){return t.bucket="_user.default",this._logger.trace("[Storage::putUser]: ",t),t.kvs&&0!==t.kvs.length?v(it.get(this),t,!1,rt.get(this)):Promise.reject("[Storage::putUser]: params.kvs undefined")};var ut=function(){this._proxy=self,this.view=new O,this.emailclient=new C(self),this._registerMessageListeners()};ut.prototype.publish=function(t,n){this._proxy.postMessage({method:"notifyView",params:{topic:t,value:n}})},ut.prototype._registerMessageListeners=function(){var t=this;this._proxy&&(this._proxy.onmessage=function(n){var e=n.data.method;t["_"+e]&&t["_"+e](n.data.params)})},ut.prototype._init=function(t){this.storage=new I,this.storage.init(new ot({type:"SIFT",siftGuid:t.siftGuid,accountGuid:t.accountGuid,schema:t.dbSchema})),this._guid=t.siftGuid,this._account=t.accountGuid,this._proxy.postMessage({method:"initCallback",result:t})},ut.prototype._terminate=function(){this._proxy&&this._proxy.close()},ut.prototype._postCallback=function(t,n){this._proxy.postMessage({method:"loadViewCallback",params:{user:{guid:this._account},sift:{guid:this._guid},type:t.type,sizeClass:t.sizeClass,result:n}})},ut.prototype._loadView=function(n){var e=this;if(!this.loadView)return void t.error("[SiftController::_loadView]: Sift controller must implement the loadView method");var r=this.loadView({sizeClass:n.sizeClass,type:n.type,params:n.data});r.data&&"function"==typeof r.data.then?(r.html&&this._postCallback(n,{html:r.html}),r.data.then(function(t){e._postCallback(n,{html:r.html,data:t})}).catch(function(n){t.error("[SiftController::loadView]: promise rejected: ",n)})):this._postCallback(n,r)},ut.prototype._storageUpdated=function(t){var n=this;this.storage.publish("*",t),t.forEach(function(t){n.storage.publish(t,[t])})},ut.prototype._notifyController=function(t){this.view.publish(t.topic,t.value)},ut.prototype._emailComposer=function(t){this.emailclient.publish(t.topic,t.value)},n.EmailClientController=N,n.SiftController=ut,n.SiftStorage=I,n.SiftView=P,n.registerSiftView=k,n.createSiftView=E,n.createSiftController=S,n.registerSiftController=M,n.createEmailClientController=A,n.registerEmailClientController=T,Object.defineProperty(n,"__esModule",{value:!0})})}).call(n,e(1),function(){return this}())},function(t,n,e){(function(t){!function(t,r){r(n,e(10))}(this,function(n,e){"use strict";function r(){}function i(t,n){var e=new r;if(t instanceof r)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var i,o=-1,u=t.length;if(null==n)for(;++o<u;)e.set(o,t[o]);else for(;++o<u;)e.set(n(i=t[o],o,t),i)}else if(t)for(var a in t)e.set(a,t[a]);return e}function o(){}function u(t,n){var e=new o;if(t instanceof o)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function a(){for(var t,n=arguments,e=0,r=arguments.length,i={};e<r;++e){if(!(t=n[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new s(i)}function s(t){this._=t}function c(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function l(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function f(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Se,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function h(t){return function(n,e){t(null==n?e:null);
}}function p(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function d(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function v(t,n){var e=d(t);return function(r,i){return n(e(r),i,t)}}function _(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function y(t,n){return function(e){return t(e.responseText,n)}}function g(){this.reset()}function m(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function w(t){return t>1?0:t<-1?ur:Math.acos(t)}function x(t){return t>1?ar:t<-1?-ar:Math.asin(t)}function b(){}function k(t,n){t&&kr.hasOwnProperty(t.type)&&kr[t.type](t,n)}function E(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function S(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)E(t[e],n,1);n.polygonEnd()}function M(t){return[dr(t[1],t[0]),x(t[2])]}function A(t){var n=t[0],e=t[1],r=vr(e);return[r*vr(n),r*mr(n),mr(e)]}function T(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function j(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function N(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function O(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function P(t){var n=wr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function C(t,n){t*=fr,n*=fr;var e=vr(n);I(e*vr(t),e*mr(t),mr(n))}function I(t,n,e){++Fe,Ue+=(t-Ue)/Fe,He+=(n-He)/Fe,Xe+=(e-Xe)/Fe}function q(){Sr.point=z}function z(t,n){t*=fr,n*=fr;var e=vr(n);nr=e*vr(t),er=e*mr(t),rr=mr(n),Sr.point=R,I(nr,er,rr)}function R(t,n){t*=fr,n*=fr;var e=vr(n),r=e*vr(t),i=e*mr(t),o=mr(n),u=dr(wr((u=er*o-rr*i)*u+(u=rr*r-nr*o)*u+(u=nr*i-er*r)*u),nr*r+er*i+rr*o);Ge+=u,We+=u*(nr+(nr=r)),Ke+=u*(er+(er=i)),Ye+=u*(rr+(rr=o)),I(nr,er,rr)}function L(){Sr.point=C}function D(){Sr.point=B}function V(){F(Ze,tr),Sr.point=C}function B(t,n){Ze=t,tr=n,t*=fr,n*=fr,Sr.point=F;var e=vr(n);nr=e*vr(t),er=e*mr(t),rr=mr(n),I(nr,er,rr)}function F(t,n){t*=fr,n*=fr;var e=vr(n),r=e*vr(t),i=e*mr(t),o=mr(n),u=er*o-rr*i,a=rr*r-nr*o,s=nr*i-er*r,c=wr(u*u+a*a+s*s),l=nr*r+er*i+rr*o,f=c&&-w(l)/c,h=dr(c,l);$e+=f*u,Je+=f*a,Qe+=f*s,Ge+=h,We+=h*(nr+(nr=r)),Ke+=h*(er+(er=i)),Ye+=h*(rr+(rr=o)),I(nr,er,rr)}function G(t,n){return[t>ur?t-cr:t<-ur?t+cr:t,n]}function U(t,n,e){return(t%=cr)?n||e?Mr(X(t),W(n,e)):X(t):n||e?W(n,e):G}function H(t){return function(n,e){return n+=t,[n>ur?n-cr:n<-ur?n+cr:n,e]}}function X(t){var n=H(t);return n.invert=H(-t),n}function W(t,n){function e(t,n){var e=vr(n),a=vr(t)*e,s=mr(t)*e,c=mr(n),l=c*r+a*i;return[dr(s*o-l*u,a*r-c*i),x(l*o+s*u)]}var r=vr(t),i=mr(t),o=vr(n),u=mr(n);return e.invert=function(t,n){var e=vr(n),a=vr(t)*e,s=mr(t)*e,c=mr(n),l=c*o-s*u;return[dr(s*o+c*u,a*r+l*i),x(l*r-a*i)]},e}function K(t,n,e,r,i,o){if(e){var u=vr(n),a=mr(n),s=r*e;null==i?(i=n+r*cr,o=n-s/2):(i=Y(u,i),o=Y(u,o),(r>0?i<o:i>o)&&(i+=r*cr));for(var c,l=i;r>0?l>o:l<o;l-=s)c=M([u,-a*vr(l),-a*mr(l)]),t.point(c[0],c[1])}}function Y(t,n){n=A(n),n[0]-=t,P(n);var e=w(-n[1]);return((-n[2]<0?-e:e)+cr-or)%cr}function $(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function J(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Q(t){return function(n,e){return Dr(t(n),e)}}function Z(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,c){var l=0,f=0;if(null==i||(l=u(i,a))!==(f=u(o,a))||s(i,o)<0^a>0){do c.point(0===l||3===l?t:e,l>1?r:n);while((l=(l+a+4)%4)!==f)}else c.point(o[0],o[1])}function u(r,i){return hr(r[0]-t)<or?i>0?0:3:hr(r[0]-e)<or?i>0?2:1:hr(r[1]-n)<or?i>0?1:0:i>0?3:2}function a(t,n){return s(t.x,n.x)}function s(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function s(t,n){i(t,n)&&M.point(t,n)}function c(){for(var n=0,e=0,i=_.length;e<i;++e)for(var o,u,a=_[e],s=1,c=a.length,l=a[0],f=l[0],h=l[1];s<c;++s)o=f,u=h,l=a[s],f=l[0],h=l[1],u<=r?h>r&&(f-o)*(r-u)>(h-u)*(t-o)&&++n:h<=r&&(f-o)*(r-u)<(h-u)*(t-o)&&--n;return n}function l(){M=A,v=[],_=[],S=!0}function f(){var t=c(),n=S&&t,e=(v=Hr(v)).length;(n||e)&&(u.polygonStart(),n&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),e&&Lr(v,a,t,o,u),u.polygonEnd()),M=u,v=_=y=null}function h(){T.point=d,_&&_.push(y=[]),E=!0,k=!1,x=b=NaN}function p(){v&&(d(g,m),w&&k&&A.rejoin(),v.push(A.result())),T.point=s,k&&M.lineEnd()}function d(o,u){var a=i(o,u);if(_&&y.push([o,u]),E)g=o,m=u,w=a,E=!1,a&&(M.lineStart(),M.point(o,u));else if(a&&k)M.point(o,u);else{var s=[x=Math.max(Wr,Math.min(Xr,x)),b=Math.max(Wr,Math.min(Xr,b))],c=[o=Math.max(Wr,Math.min(Xr,o)),u=Math.max(Wr,Math.min(Xr,u))];zr(s,c,t,n,e,r)?(k||(M.lineStart(),M.point(s[0],s[1])),M.point(c[0],c[1]),a||M.lineEnd(),S=!1):a&&(M.lineStart(),M.point(o,u),S=!1)}x=o,b=u,k=a}var v,_,y,g,m,w,x,b,k,E,S,M=u,A=qr(),T={point:s,lineStart:h,lineEnd:p,polygonStart:l,polygonEnd:f};return T}}function tt(t,n,e){var r=Gr(t,n-or,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function nt(t,n,e){var r=Gr(t,n-or,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function et(){Qr.point=rt}function rt(t,n){Qr.point=it,Ar=jr=t,Tr=Nr=n}function it(t,n){Jr.add(Nr*t-jr*n),jr=t,Nr=n}function ot(){it(Ar,Tr)}function ut(t,n){t<Zr&&(Zr=t),t>ni&&(ni=t),n<ti&&(ti=n),n>ei&&(ei=n)}function at(t,n){ii+=t,oi+=n,++ui}function st(){pi.point=ct}function ct(t,n){pi.point=lt,at(Cr=t,Ir=n)}function lt(t,n){var e=t-Cr,r=n-Ir,i=wr(e*e+r*r);ai+=i*(Cr+t)/2,si+=i*(Ir+n)/2,ci+=i,at(Cr=t,Ir=n)}function ft(){pi.point=at}function ht(){pi.point=dt}function pt(){vt(Or,Pr)}function dt(t,n){pi.point=vt,at(Or=Cr=t,Pr=Ir=n)}function vt(t,n){var e=t-Cr,r=n-Ir,i=wr(e*e+r*r);ai+=i*(Cr+t)/2,si+=i*(Ir+n)/2,ci+=i,i=Ir*t-Cr*n,li+=i*(Cr+t),fi+=i*(Ir+n),hi+=3*i,at(Cr=t,Ir=n)}function _t(t){this._context=t}function yt(){this._string=[]}function gt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function mt(t){return t.length>1}function wt(t,n){return((t=t.x)[0]<0?t[1]-ar-or:ar-t[1])-((n=n.x)[0]<0?n[1]-ar-or:ar-n[1])}function xt(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?ur:-ur,s=hr(o-e);hr(s-ur)<or?(t.point(e,r=(r+u)/2>0?ar:-ar),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&s>=ur&&(hr(e-i)<or&&(e-=i*or),hr(o-a)<or&&(o-=a*or),r=bt(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function bt(t,n,e,r){var i,o,u=mr(t-e);return hr(u)>or?pr((mr(n)*(o=vr(r))*mr(e)-mr(r)*(i=vr(n))*mr(t))/(i*o*u)):(n+r)/2}function kt(t,n,e,r){var i;if(null==t)i=e*ar,r.point(-ur,i),r.point(0,i),r.point(ur,i),r.point(ur,0),r.point(ur,-i),r.point(0,-i),r.point(-ur,-i),r.point(-ur,0),r.point(-ur,i);else if(hr(t[0]-n[0])>or){var o=t[0]<n[0]?ur:-ur;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Et(t){function n(){}var e=n.prototype=Object.create(St.prototype);for(var r in t)e[r]=t[r];return function(t){var e=new n;return e.stream=t,e}}function St(){}function Mt(t,n,e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Er(e,t.stream(ri));var u=ri.result(),a=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),s=+n[0][0]+(r-a*(u[1][0]+u[0][0]))/2,c=+n[0][1]+(i-a*(u[1][1]+u[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([s,c])}function At(t){return function(n,e){return Mt(t,[[0,0],n],e)}}function Tt(t){return function(n,e){return Mt(t,n,e)}}function jt(t){return Et({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function Nt(t,n){function e(r,i,o,u,a,s,c,l,f,h,p,d,v,_){var y=c-r,g=l-i,m=y*y+g*g;if(m>4*n&&v--){var w=u+h,b=a+p,k=s+d,E=wr(w*w+b*b+k*k),S=x(k/=E),M=hr(hr(k)-1)<or||hr(o-f)<or?(o+f)/2:dr(b,w),A=t(M,S),T=A[0],j=A[1],N=T-r,O=j-i,P=g*N-y*O;(P*P/m>n||hr((y*N+g*O)/m-.5)>.3||u*h+a*p+s*d<xi)&&(e(r,i,o,u,a,s,T,j,M,w/=E,b/=E,k,v,_),_.point(T,j),e(T,j,M,w,b,k,c,l,f,h,p,d,v,_))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function i(){y=NaN,b.point=o,n.lineStart()}function o(r,i){var o=A([r,i]),u=t(r,i);e(y,g,_,m,w,x,y=u[0],g=u[1],_=r,m=o[0],w=o[1],x=o[2],wi,n),n.point(y,g)}function u(){b.point=r,n.lineEnd()}function a(){i(),b.point=s,b.lineEnd=c}function s(t,n){o(l=t,n),f=y,h=g,p=m,d=w,v=x,b.point=o}function c(){e(y,g,_,m,w,x,f,h,l,p,d,v,wi,n),b.lineEnd=u,u()}var l,f,h,p,d,v,_,y,g,m,w,x,b={point:r,lineStart:i,lineEnd:u,polygonStart:function(){n.polygonStart(),b.lineStart=a},polygonEnd:function(){n.polygonEnd(),b.lineStart=i}};return b}}function Ot(t){return Pt(function(){return t})()}function Pt(t){function n(t){return t=l(t[0]*fr,t[1]*fr),[t[0]*_+a,s-t[1]*_]}function e(t){return t=l.invert((t[0]-a)/_,(s-t[1])/_),t&&[t[0]*lr,t[1]*lr]}function r(t,n){return t=u(t,n),[t[0]*_+a,s-t[1]*_]}function i(){l=Mr(c=U(x,b,k),u);var t=u(m,w);return a=y-t[0]*_,s=g+t[1]*_,o()}function o(){return d=v=null,n}var u,a,s,c,l,f,h,p,d,v,_=150,y=480,g=250,m=0,w=0,x=0,b=0,k=0,E=null,S=gi,M=null,A=Yr,T=.5,j=bi(r,T);return n.stream=function(t){return d&&v===t?d:d=ki(S(c,j(A(v=t))))},n.clipAngle=function(t){return arguments.length?(S=+t?mi(E=t*fr,6*fr):(E=null,gi),o()):E*lr},n.clipExtent=function(t){return arguments.length?(A=null==t?(M=f=h=p=null,Yr):Z(M=+t[0][0],f=+t[0][1],h=+t[1][0],p=+t[1][1]),o()):null==M?null:[[M,f],[h,p]]},n.scale=function(t){return arguments.length?(_=+t,i()):_},n.translate=function(t){return arguments.length?(y=+t[0],g=+t[1],i()):[y,g]},n.center=function(t){return arguments.length?(m=t[0]%360*fr,w=t[1]%360*fr,i()):[m*lr,w*lr]},n.rotate=function(t){return arguments.length?(x=t[0]%360*fr,b=t[1]%360*fr,k=t.length>2?t[2]%360*fr:0,i()):[x*lr,b*lr,k*lr]},n.precision=function(t){return arguments.length?(j=bi(r,T=t*t),o()):wr(T)},n.fitExtent=Tt(n),n.fitSize=At(n),function(){return u=t.apply(this,arguments),n.invert=u.invert&&e,i()}}function Ct(t){var n=0,e=ur/3,r=Pt(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*fr,e=t[1]*fr):[n*lr,e*lr]},i}function It(t,n){function e(t,n){var e=wr(o-2*i*mr(n))/i;return[e*mr(t*=i),u-e*vr(t)]}var r=mr(t),i=(r+mr(n))/2,o=1+r*(2*i-r),u=wr(o)/i;return e.invert=function(t,n){var e=u-n;return[dr(t,e)/i,x((o-(t*t+e*e)*i*i)/(2*i))]},e}function qt(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function zt(t){return function(n,e){var r=vr(n),i=vr(e),o=t(r*i);return[o*i*mr(n),o*mr(e)]}}function Rt(t){return function(n,e){var r=wr(n*n+e*e),i=t(r),o=mr(i),u=vr(i);return[dr(n*o,r*u),x(r&&e*o/r)]}}function Lt(t,n){return[t,gr(xr((ar+n)/2))]}function Dt(t){var n,e=Ot(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(t){return arguments.length?(r(t),n&&e.clipExtent(null),e):r()},e.translate=function(t){return arguments.length?(i(t),n&&e.clipExtent(null),e):i()},e.clipExtent=function(t){if(!arguments.length)return n?null:o();if(n=null==t){var u=ur*r(),a=i();t=[[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]]}return o(t),e},e.clipExtent(null)}function Vt(t,n){return[t,n]}function Bt(t,n){var e=vr(n),r=vr(t)*e;return[e*mr(t)/r,mr(n)/r]}function Ft(t,n){return[vr(n)*mr(t),mr(n)]}function Gt(t,n){return[gr(xr((ar+n)/2)),-t]}function Ut(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function Ht(){return new Ut}function Xt(t){this._context=t}function Wt(t){this._curve=t}function Kt(t){function n(n){return new Wt(t(n))}return n._curve=t,n}function Yt(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function $t(t){this._context=t}function Jt(t,n){this._basis=new $t(t),this._beta=n}function Qt(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Zt(t,n){this._context=t,this._k=(1-n)/6}function tn(t,n){this._context=t,this._k=(1-n)/6}function nn(t,n){this._context=t,this._k=(1-n)/6}function en(t,n,e){var r=t._x1,i=t._y1,o=t._x2,u=t._y2;if(t._l01_a>Ri){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Ri){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-n*t._l12_2a)/l,u=(u*c+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,u,t._x2,t._y2)}function rn(t,n){this._context=t,this._alpha=n}function on(t,n){this._context=t,this._alpha=n}function un(t,n){this._context=t,this._alpha=n}function an(t){return t<0?-1:1}function sn(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),u=(e-t._y1)/(i||r<0&&-0),a=(o*i+u*r)/(r+i);return(an(o)+an(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(a))||0}function cn(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function ln(t,n,e){var r=t._x0,i=t._y0,o=t._x1,u=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*n,o-a,u-a*e,o,u)}function fn(t){this._context=t}function hn(t){this._context=new pn(t)}function pn(t){this._context=t}function dn(t){this._context=t}function vn(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),u=new Array(r);for(i[0]=0,o[0]=2,u[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,u[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,u[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,u[n]-=e*u[n-1];for(i[r-1]=u[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(u[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function _n(t){if(!t)return $i;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],u=t.translate[1];return function(t,a){a||(n=e=0),t[0]=(n+=t[0])*r+o,t[1]=(e+=t[1])*i+u}}function yn(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}function gn(t,n){for(var e=0,r=t.length;e<r;){var i=e+r>>>1;t[i]<n?e=i+1:r=i}return e}function mn(t,n){var e={type:"Feature",id:n.id,properties:n.properties||{},geometry:wn(t,n)};return null==n.id&&delete e.id,e}function wn(t,n){function e(t,n){n.length&&n.pop();for(var e,r=c[t<0?~t:t],i=0,o=r.length;i<o;++i)n.push(e=r[i].slice()),s(e,i);t<0&&yn(n,o)}function r(t){return t=t.slice(),s(t,0),t}function i(t){for(var n=[],r=0,i=t.length;r<i;++r)e(t[r],n);return n.length<2&&n.push(n[0].slice()),n}function o(t){for(var n=i(t);n.length<4;)n.push(n[0].slice());return n}function u(t){return t.map(o)}function a(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(a)}:n in l?{type:n,coordinates:l[n](t)}:null}var s=_n(t.transform),c=t.arcs,l={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return u(t.arcs)},MultiPolygon:function(t){return t.arcs.map(u)}};return a(n)}function xn(t,n,e){function r(t){var n=t<0?~t:t;(c[n]||(c[n]=[])).push({i:t,g:s})}function i(t){t.forEach(r)}function o(t){t.forEach(i)}function u(t){"GeometryCollection"===t.type?t.geometries.forEach(u):t.type in l&&(s=t,l[t.type](t.arcs))}var a=[];if(arguments.length>1){var s,c=[],l={LineString:i,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};u(n),c.forEach(arguments.length<3?function(t){a.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&a.push(t[0].i)})}else for(var f=0,h=t.arcs.length;f<h;++f)a.push(f);return{type:"MultiLineString",arcs:Qi(t,a)}}function bn(t){return t?t/Math.sin(t):1}function kn(t){return t>1?go:t<-1?-go:Math.asin(t)}function En(t){return t>1?0:t<-1?yo:Math.acos(t)}function Sn(t){return t>0?Math.sqrt(t):0}function Mn(t){return t=oo(2*t),(t-1)/(t+1)}function An(t){return(oo(t)-oo(-t))/2}function Tn(t){return(oo(t)+oo(-t))/2}function jn(t){return ao(t+Sn(t*t+1))}function Nn(t){return ao(t+Sn(t*t-1))}function On(t,n){var e=io(n),r=bn(En(e*io(t/=2)));return[2*e*ho(t)*r,ho(n)*r]}function Pn(t,n){var e=po(n/2),r=Sn(1-e*e),i=1+r*io(t/=2),o=ho(t)*r/i,u=e/i,a=o*o,s=u*u;return[4/3*o*(3+a-3*s),4/3*u*(3+3*a-s)]}function Cn(t,n){var e=no(n);return e<mo?[t,ao(po(mo+n/2))]:[t*io(e)*(2*xo-1/ho(e)),fo(n)*(2*xo*(e-mo)-ao(po(e/2)))]}function In(t,n){var e,r=t*ho(n),i=30;do n-=e=(n+ho(n)-r)/(1+io(n));while(no(e)>vo&&--i>0);return n/2}function qn(t,n,e){function r(r,i){return[t*r*io(i=In(e,i)),n*ho(i)]}return r.invert=function(r,i){return i=kn(i/n),[r/(t*io(i)),kn((2*i+ho(2*i))/e)]},r}function zn(t,n){var e=In(yo,n);return[To*t/(1/io(n)+jo/io(e)),(n+xo*ho(e))/To]}function Rn(t,n){return[t*io(n),n]}function Ln(t,n){var e=Sn(1-ho(n));return[2/bo*t*e,bo*(1-e)]}function Dn(t){function n(t,n){return[t*e,ho(n)/e]}var e=io(t);return n.invert=function(t,n){return[t/e,kn(n*e)]},n}function Vn(t,n){var e=Sn(4-3*ho(no(n)));return[2/Sn(6*yo)*t*e,fo(n)*Sn(2*yo/3)*(2-e)]}function Bn(t,n){for(var e=(1+go)*ho(n),r=0,i=1/0;r<10&&no(i)>vo;r++)n-=i=(n+ho(n)-e)/(1+io(n));return e=Sn(2+yo),[t*(1+io(n))/e,2*n/e]}function Fn(t,n){var e=ho(t/=2),r=io(t),i=Sn(io(n)),o=io(n/=2),u=ho(n)/(o+xo*r*i),a=Sn(2/(1+u*u)),s=Sn((xo*o+(r+e)*i)/(xo*o+(r-e)*i));return[No*(a*(s-1/s)-2*ao(s)),No*(a*u*(s+1/s)-2*eo(u))]}function Gn(t,n){var e=t*t,r=n*n;return[t*(1-.162388*r)*(.87-952426e-9*e*e),n*(1+r/12)]}function Un(t,n){var e=fo(t),r=fo(n),i=io(n),o=io(t)*i,u=ho(t)*i,a=ho(r*n);t=no(ro(u,a)),n=kn(o),no(t-go)>vo&&(t%=go);var s=Hn(t>yo/4?go-t:t,n);return t>yo/4&&(a=s[0],s[0]=-s[1],s[1]=-a),s[0]*=e,s[1]*=-r,s}function Hn(t,n){if(n===go)return[0,0];var e,r,i=ho(n),o=i*i,u=o*o,a=1+u,s=1+3*u,c=1-u,l=kn(1/Sn(a)),f=c+o*a*l,h=(1-i)/f,p=Sn(h),d=h*a,v=Sn(d),_=p*c;if(0===t)return[0,-(_+o*v)];var y,g=io(n),m=1/g,w=2*i*g,x=(-3*o+l*s)*w,b=(-f*g-(1-i)*x)/(f*f),k=.5*b/p,E=c*k-2*o*p*w,S=o*a*b+h*s*w,M=-m*w,A=-m*S,T=-2*m*E,j=4*t/yo;if(t>.222*yo||n<yo/4&&t>.175*yo){if(e=(_+o*Sn(d*(1+u)-_*_))/(1+u),t>yo/4)return[e,e];var N=e,O=.5*e;e=.5*(O+N),r=50;do{var P=Sn(d-e*e),C=e*(T+M*P)+A*kn(e/v)-j;if(!C)break;C<0?O=e:N=e,e=.5*(O+N)}while(no(N-O)>vo&&--r>0)}else{e=vo,r=25;do{var I=e*e,q=Sn(d-I),z=T+M*q,R=e*z+A*kn(e/v)-j,L=z+(A-M*I)/q;e-=y=q?R/L:0}while(no(y)>vo&&--r>0)}return[e,-_-o*Sn(d-e*e)]}function Xn(t,n){for(var e=0,r=1,i=.5,o=50;;){var u=i*i,a=Sn(i),s=kn(1/Sn(1+u)),c=1-u+i*(1+u)*s,l=(1-a)/c,f=Sn(l),h=l*(1+u),p=f*(1-u),d=h-t*t,v=Sn(d),_=n+p+i*v;if(no(r-e)<_o||0===--o||0===_)break;_>0?e=i:r=i,i=.5*(e+r)}if(!o)return null;var y=kn(a),g=io(y),m=1/g,w=2*a*g,x=(-3*i+s*(1+3*u))*w,b=(-c*g-(1-a)*x)/(c*c),k=.5*b/f,E=(1-u)*k-2*i*f*w,S=-2*m*E,M=-m*w,A=-m*(i*(1+u)*b+l*(1+3*u)*w);return[yo/4*(t*(S+M*v)+A*kn(t/Sn(h))),y]}function Wn(t,n,e){var r,i,o;return t?(r=Kn(t,e),n?(i=Kn(n,1-e),o=i[1]*i[1]+e*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/o,r[1]*r[2]*i[0]*i[1]/o],[r[1]*i[1]/o,-r[0]*r[2]*i[0]*i[2]/o],[r[2]*i[1]*i[2]/o,-e*r[0]*r[1]*i[0]/o]]):[[r[0],0],[r[1],0],[r[2],0]]):(i=Kn(n,1-e),[[0,i[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]])}function Kn(t,n){var e,r,i,o,u;if(n<vo)return o=ho(t),r=io(t),e=n*(t-o*r)/4,[o-e*r,r+e*o,1-n*o*o/2,t-e];if(n>=1-vo)return e=(1-n)/4,r=Tn(t),o=Mn(t),i=1/r,u=r*An(t),[o+e*(u-t)/(r*r),i-e*o*i*(u-t),i+e*o*i*(u+t),2*eo(oo(t))-go+e*(u-t)/r];var a=[1,0,0,0,0,0,0,0,0],s=[Sn(n),0,0,0,0,0,0,0,0],c=0;for(r=Sn(1-n),u=1;no(s[c]/a[c])>vo&&c<8;)e=a[c++],s[c]=(e-r)/2,a[c]=(e+r)/2,r=Sn(e*r),u*=2;i=u*a[c]*t;do o=s[c]*ho(r=i)/a[c],i=(kn(o)+i)/2;while(--c);return[ho(i),o=io(i),o/io(i-r),i]}function Yn(t,n,e){var r=no(t),i=no(n),o=An(i);if(r){var u=1/ho(r),a=1/(po(r)*po(r)),s=-(a+e*(o*o*u*u)-1+e),c=(e-1)*a,l=(-s+Sn(s*s-4*c))/2;return[$n(eo(1/Sn(l)),e)*fo(t),$n(eo(Sn((l/a-1)/e)),1-e)*fo(n)]}return[0,$n(eo(o),1-e)*fo(n)]}function $n(t,n){if(!n)return t;if(1===n)return ao(po(t/2+mo));for(var e=1,r=Sn(1-n),i=Sn(n),o=0;no(i)>vo;o++){if(t%yo){var u=eo(r*po(t)/e);u<0&&(u+=yo),t+=u+~~(t/yo)*yo}else t+=t;i=(e+r)/2,r=Sn(e*r),i=((e=i)-r)/2}return t/(lo(2,o)*e)}function Jn(t,n){var e=(xo-1)/(xo+1),r=Sn(1-e*e),i=$n(go,r*r),o=-1,u=ao(po(yo/4+no(n)/2)),a=oo(o*u)/Sn(e),s=Qn(a*io(o*t),a*ho(o*t)),c=Yn(s[0],s[1],r*r);return[-c[1],(n>=0?1:-1)*(.5*i-c[0])]}function Qn(t,n){var e=t*t,r=n+1,i=1-e-n*n;return[.5*((t>=0?go:-go)-ro(i,2*t)),-.25*ao(i*i+4*e)+.5*ao(r*r+e)]}function Zn(t,n){var e=n[0]*n[0]+n[1]*n[1];return[(t[0]*n[0]+t[1]*n[1])/e,(t[1]*n[0]-t[0]*n[1])/e]}function te(t,n){return[t*io(n)/io(n/=2),2*ho(n)]}function ne(t,n){return n>-qo?(t=Ao(t,n),t[1]+=zo,t):Rn(t,n)}function ee(t,n){return no(n)>qo?(t=Ao(t,n),t[1]-=n>0?zo:-zo,t):Rn(t,n)}function re(t,n){return no(t[0]-n[0])<vo&&no(t[1]-n[1])<vo}function ie(t,n){for(var e,r,i,o=-1,u=t.length,a=t[0],s=[];++o<u;){e=t[o],r=(e[0]-a[0])/n,i=(e[1]-a[1])/n;for(var c=0;c<n;++c)s.push([a[0]+c*r,a[1]+c*i]);a=e}return s.push(e),s}function oe(t){var n,e,r,i,o,u,a,s=[],c=t[0].length;for(a=0;a<c;++a)n=t[0][a],e=n[0][0],r=n[0][1],i=n[1][1],o=n[2][0],u=n[2][1],s.push(ie([[e+vo,r+vo],[e+vo,i-vo],[o-vo,i-vo],[o-vo,u+vo]],30));for(a=t[1].length-1;a>=0;--a)n=t[1][a],e=n[0][0],r=n[0][1],i=n[1][1],o=n[2][0],u=n[2][1],s.push(ie([[o-vo,u-vo],[o-vo,i+vo],[e+vo,i+vo],[e+vo,r-vo]],30));return{type:"Polygon",coordinates:[Hr(s)]}}function ue(t,n){var e=t*t,r=n*n;return[t*(.975534+r*(-.119161+e*-.0143059+r*-.0547009)),n*(1.00384+e*(.0802894+r*-.02855+199025e-9*e)+r*(.0998909+r*-.0491032))]}function ae(t,n){return[ho(t)/io(n),po(n)*io(t)]}function se(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),n*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}function ce(t,n){var e=n*n;return[t,n*(Uo+e*e*(Ho+e*(Xo+Wo*e)))]}function le(t,n){if(no(n)<vo)return[t,0];var e=po(n),r=t*ho(n);return[ho(r)/e,n+(1-io(r))/e]}function fe(t,n){var e,r=co(18,36*no(n)/yo),i=uo(r),o=r-i,u=(e=nu[i])[0],a=e[1],s=(e=nu[++i])[0],c=e[1],l=(e=nu[co(19,++i)])[0],f=e[1];return[t*(s+o*(l-u)/2+o*o*(l-2*s+u)/2),(n>0?go:-go)*(c+o*(f-a)/2+o*o*(f-2*c+a)/2)]}function he(t,n){if(no(n)<vo)return[t,0];var e=no(n/go),r=kn(e);if(no(t)<vo||no(no(n)-go)<vo)return[0,fo(n)*yo*po(r/2)];var i=io(r),o=no(yo/t-t/yo)/2,u=o*o,a=i/(e+i-1),s=a*(2/e-1),c=s*s,l=c+u,f=a-c,h=u+a;return[fo(t)*yo*(o*f+Sn(u*f*f-l*(a*a-c)))/l,fo(n)*yo*(s*h-o*Sn((u+1)*l-h*h))/l]}function pe(t,n){if(no(n)<vo)return[t,0];var e=no(n/go),r=kn(e);if(no(t)<vo||no(no(n)-go)<vo)return[0,fo(n)*yo*po(r/2)];var i=io(r),o=no(yo/t-t/yo)/2,u=o*o,a=i*(Sn(1+u)-o*i)/(1+u*e*e);return[fo(t)*yo*a,fo(n)*yo*Sn(1-a*(2*o+a))]}function de(t,n){if(no(n)<vo)return[t,0];var e=n/go,r=kn(e);if(no(t)<vo||no(no(n)-go)<vo)return[0,yo*po(r/2)];var i=(yo/t-t/yo)/2,o=e/(1+io(r));return[yo*(fo(t)*Sn(i*i+1-o*o)-i),yo*o]}function ve(t,n){if(!n)return[t,0];var e=no(n);if(!t||e===go)return[0,n];var r=e/go,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),u=o*o,a=r*o,s=i+u+2*a,c=r+3*o,l=t/go,f=l+1/l,h=fo(no(t)-go)*Sn(f*f-4),p=h*h,d=s*(i+u*p-1)+(1-i)*(i*(c*c+4*u)+12*a*u+4*u*u),v=(h*(s+u-1)+2*Sn(d))/(4*s+p);return[fo(t)*go*v,fo(n)*go*Sn(1+h*no(v)-v*v)]}function _e(t,n){var e=On(t,n);return[(e[0]+t/go)/2,(e[1]+n)/2]}function ye(t){function n(){p=o-l-s}function r(){d=u-a-c}function i(n){var r=n.selection?n.selection():n,s=void 0!==n.selection;r.each(function(){var r=e.select(this),c=r.select(i.self());if(c.empty()){var h=(null==t?"":t+"-")+"title",p=(null==t?"":t+"-")+"desc";c=r.append("svg").attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("preserveAspectRatio","xMidYMid meet").attr("aria-labelledby",h).attr("aria-describedby",p).attr("id",t),c.append("title").attr("id",h),c.append("desc").attr("id",p),c.append("defs"),c.append("rect").attr("class","background"),c.append("g").attr("class","svg-child")}var d=c.select("defs"),x=d.selectAll("style").data(v?[v]:[]);x.exit().remove(),x=x.enter().append("style").attr("type","text/css").merge(x),x.text(v),c.attr("role",m),c.select("title").text(y),c.select("desc").text(g);var b=c.select("rect.background").attr("width",null!=_?o*f:null).attr("height",null!=_?u*f:null);c.attr("class",w);var k=c.select(i.child());s===!0&&(c=c.transition(n),k=k.transition(n),b=b.transition(n)),c.attr("width",o*f).attr("height",u*f).attr("viewBox","0 0 "+o+" "+u),k.attr("transform","translate("+l+","+a+")"),b.attr("fill",_)})}var o=300,u=150,a=16,s=16,c=16,l=16,f=1,h="g.svg-child",p=-1,d=-1,v=null,_=null,y=null,g=null,m="img",w="svg-svg";return n(),r(),i.self=function(){return"svg"+(t?"#"+t:"")},i.child=function(){return h},i.childDefs=function(){return"defs"},i.childWidth=function(){return p},i.childHeight=function(){return d},i.id=function(){return t},i.classed=function(t){return arguments.length?(w=t,i):w},i.style=function(t){return arguments.length?(v=t,i):v},i.background=function(t){return arguments.length?(_=t,i):_},i.width=function(t){return arguments.length?(o=t,n(),i):o},i.height=function(t){return arguments.length?(u=t,r(),i):o},i.scale=function(t){return arguments.length?(f=t,i):f},i.title=function(t){return arguments.length?(y=t,i):y},i.desc=function(t){return arguments.length?(g=t,i):g},i.role=function(t){return arguments.length?(m=t,i):m},i.margin=function(t){return arguments.length?(void 0!==t.top?(a=t.top,s=t.right,c=t.bottom,l=t.left):(a=t,s=t,c=t,l=t),n(),r(),i):{top:a,right:s,bottom:c,left:l}},i}function ge(t,n){return n={exports:{}},t(n,n.exports),n.exports}function me(t){return t<414?"12px":"14px"}function we(t){return null==t?[]:Array.isArray(t)?t:[t]}function xe(n){function r(M){function A(){var t=function(){return y};if(null==y){var n=su.standard.filter(function(t,n){return n!==su.names.yellow&&n!==su.names.grey&&n!==su.names.brown});t=function(t,e,r){return n[(r+su.names.brown)%n.length]}}else"function"==typeof y?t=y:Array.isArray(y)&&(t=function(t,n,e){return y[e%y.length]});return t}var T=M.selection?M.selection():M,j=void 0!==M.selection,N=u;void 0===N&&(N=cu[o].background);var O=l;void 0===O&&(O=r.defaultStyle(o,a));var P=_u,C=p;"string"==typeof C&&(P=du[C]||P,C=pu[C]);var I=s||Math.round(a*P.a),q=A(),z=E;void 0==z&&(z=function(t){t.attr("stroke",su.standard[su.names.yellow]).attr("stroke-width","2px").attr("stroke-dasharray","5,3")});var R=k;if(void 0===R&&(R=Wi),R&&"function"==typeof R.draw){var L=R;R=function(t){var n=Ki().type(L).size(gu);t.each(function(t){var r=e.select(this).selectAll("path").data([t]);r=r.enter().append("path").merge(r),r.attr("d",function(){return n()}).attr("opacity",.9).attr("stroke","#fff").attr("fill",su.darker[su.names.yellow]).attr("pointer-events","none").attr("stroke-width","0.5px")})}}T.each(function(){var o=e.select(this),u=null;n&&(u="svg-"+n);var s=ye(u).width(a).height(I).margin(c).scale(f).background(N).style(O),l=o;j===!0&&(l=o.transition(M)),l.call(s);var p=o.select(s.self()),y=p.select(s.child()),k=s.childWidth(),E=s.childHeight(),A=C().scale(d||k/P.s).translate([k/2,E/2]),T=di().projection(A),L="geo-clip-"+mu,D="geo-shape-"+mu,V=y.select(r.self());if(V.empty()){var B=p.select("defs");B.append("path").attr("id",L),B.append("clipPath").attr("id",D).append("use").attr("xlink:href","#"+L),V=y.append("g").attr("class",i).attr("id",n),V.append("use").attr("class","border").attr("pointer-events","none"),V.append("use").attr("class","fill").attr("pointer-events","none"),V.append("path").attr("class","land"),V.append("g").attr("class","country"),V.append("path").attr("class","boundary"),V.append("g").attr("class","links"),V.append("g").attr("class","points"),V.append("path").attr("class","graticule")}var F=V;j===!0&&(F=V.transition(M)),F.attr("transform","scale("+w+")translate("+(x?Math.round(-x+k/(2*w)):0)+","+(b?Math.round(-b+E/(2*w)):0)+")"),v?(p.select("#"+L).datum({type:"Sphere"}).attr("d",T),p.select("use.border").attr("xlink:href","#"+L),p.select("use.fill").attr("xlink:href","#"+L)):(p.select("#"+L).attr("d",null),p.select("use.border").attr("xlink:href",null),p.select("use.fill").attr("xlink:href",null)),V.select("path.graticule").datum(Kr()).attr("clip-path",v?"url(#"+D+")":null).attr("d",T).attr("stroke-opacity",h);var G=V.datum()||{},U=null;U="string"==typeof G?new Promise(function(t,n){return Te(G,function(e,r){return e?n(e):t(r)})}):G.url?new Promise(function(t,n){return Te(G.url,function(e,r){return e?n(e):t(r)})}):Promise.resolve(G);var H=m||G.links||[],X=g||G.points||[];U.then(function(t){var n=t.objects||{},i=null;if(_){var o=Ji(t,n.countries||{}).features,u=to(n.countries.geometries),a=V.select("g.country").attr("clip-path",v?"url(#"+D+")":null).selectAll("path").data(o).enter().append("path");a.attr("d",T).attr("fill",function(t,n){return q(t,n,t.color=Ur(u[n],function(t){return o[t].color})+1|0)}),V.select("path.land").attr("d",null),i=a}else{var s=V.select("path.land").datum(Ji(t,n.land||{})).attr("clip-path",v?"url(#"+D+")":null).attr("fill",function(t,n){return q(t,n,n)}).attr("d",T);V.select("g.country").selectAll("path").attr("d",null),i=s}i.on("click",function(t,n){var i=null;i=t&&t.id?T.centroid(t):e.mouse(this),S&&S.apply(r,[t,n,i])}),p.select("rect.background").on("click",function(){S&&S.apply(r,[null,-1,e.mouse(this)])}),V.select("path.boundary").datum(Zi(t,n.countries||{},function(t,n){return t!==n})).attr("clip-path",v?"url(#"+D+")":null).attr("d",T);var c=V.select("g.links").selectAll("path").data(H.map(function(t){return{type:"LineString",coordinates:[[t[0],t[1]],[t[2],t[3]]]}}));c.exit().remove(),c=c.enter().append("path").attr("fill","none").attr("pointer-events","none").merge(c),c.attr("d",T),z&&c.call(z);var l=V.select("g.points").selectAll("g").data(X);l.exit().remove(),l=l.enter().append("g").merge(l),l.attr("transform",function(t){var n=A(t);return"translate("+n[0]+", "+n[1]+")"}),R&&l.call(R)}).catch(function(n){t.error("d3-rs-geo error:",n.stack)})})}var i="chart-geo",o="light",u=void 0,a=vu,s=null,c=yu,l=void 0,f=1,h=.5,p="geoPatterson",d=null,v=!0,_=!1,y=null,g=null,m=null,w=1,x=void 0,b=void 0,k=void 0,E=void 0,S=null;return mu+=1,r.self=function(){return"g"+(n?"#"+n:"."+i)},r.id=function(){return n},r.defaultStyle=function(t,n){return"\n                "+hu.variable.cssImport+" \n                "+r.self()+" text { \n                                      font-family: "+hu.variable.family+";\n                                      font-size: "+hu.variable.sizeForWidth(n)+";  \n                                      font-weight: "+hu.fixed.weightMonochrome+";  \n                                      fill: "+cu[t].text+";\n                                      text-anchor: middle;\n                                      dominant-baseline: central;              \n                                    }\n                                                    \n                "+r.self()+" .border {\n                      fill: none;\n                      stroke: "+cu[t].axis+";\n                      stroke-width: "+lu.axis+";\n                      stroke-linejoin: round;\n                      stroke-linecap: round;\n                      pointer-events: none;\n                    }\n                \n                "+r.self()+" .fill {\n                      fill: #010539;\n                    }\n\n                "+r.self()+" .graticule {\n                      fill: none;\n                      stroke: "+cu[t].grid+";\n                      stroke-width: 0.5px;\n                      pointer-events: none;\n                    }\n\n                  "+r.self()+" .boundary {\n                    fill: none;\n                    stroke: #fff;\n                    stroke-width: 0.5px;\n                    pointer-events: none;\n                  }\n                "},r.classed=function(t){return arguments.length?(i=t,r):i},r.background=function(t){return arguments.length?(u=t,r):u},r.theme=function(t){return arguments.length?(o=t,r):o},r.size=function(t){return arguments.length?(a=t,s=null,r):a},r.width=function(t){return arguments.length?(a=t,r):a},r.height=function(t){return arguments.length?(s=t,r):s},r.scale=function(t){return arguments.length?(f=t,r):f},r.margin=function(t){return arguments.length?(c=t,
r):c},r.graticule=function(t){return arguments.length?(h=t,r):h},r.projection=function(t){return arguments.length?(p=t,r):p},r.projectionScale=function(t){return arguments.length?(d=t,r):d},r.interrupted=function(t){return arguments.length?(v=t,r):v},r.country=function(t){return arguments.length?(_=t,r):_},r.fill=function(t){return arguments.length?(y=t,r):y},r.pointsDisplay=function(t){return arguments.length?(k=t,r):k},r.zoom=function(t){return arguments.length?(w=t,r):w},r.zoomX=function(t){return arguments.length?(x=t,r):x},r.zoomY=function(t){return arguments.length?(b=t,r):b},r.points=function(t){return arguments.length?(g=we(t),r):g},r.links=function(t){return arguments.length?(m=we(t),r):m},r.linksDisplay=function(t){return arguments.length?(E=t,r):E},r.onClick=function(t){return arguments.length?(S=t,r):S},r}var be="0.0.2",ke="$";r.prototype=i.prototype={constructor:r,has:function(t){return ke+t in this},get:function(t){return this[ke+t]},set:function(t,n){return this[ke+t]=n,this},remove:function(t){var n=ke+t;return n in this&&delete this[n]},clear:function(){var t=this;for(var n in this)n[0]===ke&&delete t[n]},keys:function(){var t=[];for(var n in this)n[0]===ke&&t.push(n.slice(1));return t},values:function(){var t=this,n=[];for(var e in this)e[0]===ke&&n.push(t[e]);return n},entries:function(){var t=this,n=[];for(var e in this)e[0]===ke&&n.push({key:e.slice(1),value:t[e]});return n},size:function(){var t=0;for(var n in this)n[0]===ke&&++t;return t},empty:function(){for(var t in this)if(t[0]===ke)return!1;return!0},each:function(t){var n=this;for(var e in this)e[0]===ke&&t(n[e],e.slice(1),n)}};var Ee=i.prototype;o.prototype=u.prototype={constructor:o,has:Ee.has,add:function(t){return t+="",this[ke+t]=t,this},remove:Ee.remove,clear:Ee.clear,values:Ee.keys,size:Ee.size,empty:Ee.empty,each:Ee.each};var Se={value:function(){}};s.prototype=a.prototype={constructor:s,on:function(t,n){var e,r=this._,i=c(t+"",r),o=-1,u=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=f(r[e],t.name,n);else if(null==n)for(e in r)r[e]=f(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=l(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new s(t)},call:function(t,n){var e=arguments;if((r=arguments.length-2)>0)for(var r,i,o=new Array(r),u=0;u<r;++u)o[u]=e[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],u=0,r=i.length;u<r;++u)i[u].value.apply(n,o)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Me=function(t,n){function e(t){var n,e=f.status;if(!e&&p(f)||e>=200&&e<300||304===e){if(u)try{n=u.call(r,f)}catch(t){return void c.call("error",r,t)}else n=f;c.call("load",r,n)}else c.call("error",r,t)}var r,o,u,s,c=a("beforesend","progress","load","error"),l=i(),f=new XMLHttpRequest,d=null,v=null,_=0;if("undefined"==typeof XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(t)||(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=f.ontimeout=e:f.onreadystatechange=function(t){f.readyState>3&&e(t)},f.onprogress=function(t){c.call("progress",r,t)},r={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==n?l.remove(t):l.set(t,n+""),r)},mimeType:function(t){return arguments.length?(o=null==t?null:t+"",r):o},responseType:function(t){return arguments.length?(s=t,r):s},timeout:function(t){return arguments.length?(_=+t,r):_},user:function(t){return arguments.length<1?d:(d=null==t?null:t+"",r)},password:function(t){return arguments.length<1?v:(v=null==t?null:t+"",r)},response:function(t){return u=t,r},get:function(t,n){return r.send("GET",t,n)},post:function(t,n){return r.send("POST",t,n)},send:function(n,e,i){return f.open(n,t,!0,d,v),null==o||l.has("accept")||l.set("accept",o+",*/*"),f.setRequestHeader&&l.each(function(t,n){f.setRequestHeader(n,t)}),null!=o&&f.overrideMimeType&&f.overrideMimeType(o),null!=s&&(f.responseType=s),_>0&&(f.timeout=_),null==i&&"function"==typeof e&&(i=e,e=null),null!=i&&1===i.length&&(i=h(i)),null!=i&&r.on("error",i).on("load",function(t){i(null,t)}),c.call("beforesend",r,f),f.send(null==e?null:e),r},abort:function(){return f.abort(),r},on:function(){var t=c.on.apply(c,arguments);return t===c?r:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return r.get(n)}return r},Ae=function(t,n){return function(e,r){var i=Me(e).mimeType(t).response(n);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}};Ae("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)});var Te=Ae("application/json",function(t){return JSON.parse(t.responseText)});Ae("text/plain",function(t){return t.responseText}),Ae("application/xml",function(t){var n=t.responseXML;if(!n)throw new Error("parse error");return n});var je=function(t){function n(t,n){var r,i,o=e(t,function(t,e){return r?r(t,e-1):(i=t,void(r=n?v(t,n):d(t)))});return o.columns=i,o}function e(t,n){function e(){if(l>=c)return u;if(i)return i=!1,o;var n,e=l;if(34===t.charCodeAt(e)){for(var r=e;r++<c;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return l=r+2,n=t.charCodeAt(r+1),13===n?(i=!0,10===t.charCodeAt(r+2)&&++l):10===n&&(i=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;l<c;){var a=1;if(n=t.charCodeAt(l++),10===n)i=!0;else if(13===n)i=!0,10===t.charCodeAt(l)&&(++l,++a);else if(n!==s)continue;return t.slice(e,l-a)}return t.slice(e)}for(var r,i,o={},u={},a=[],c=t.length,l=0,f=0;(r=e())!==u;){for(var h=[];r!==o&&r!==u;)h.push(r),r=e();n&&null==(h=n(h,f++))||a.push(h)}return a}function r(n,e){return null==e&&(e=_(n)),[e.map(u).join(t)].concat(n.map(function(n){return e.map(function(t){return u(n[t])}).join(t)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(n){return n.map(u).join(t)}function u(t){return null==t?"":a.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return{parse:n,parseRows:e,format:r,formatRows:i}},Ne=je(","),Oe=Ne.parse,Pe=je("\t"),Ce=Pe.parse,Ie=function(t,n){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=Me(e).mimeType(t);return o.row=function(t){return arguments.length?o.response(y(n,r=t)):r},o.row(r),i?o.get(i):o}};Ie("text/csv",Oe),Ie("text/tab-separated-values",Ce);var qe=function(){return new g};g.prototype={constructor:g,reset:function(){this.s=this.t=0},add:function(t){m(ir,t,this.t),m(this,ir.s,this.s),this.s?this.t+=ir.t:this.s=ir.t},valueOf:function(){return this.s}};var ze,Re,Le,De,Ve,Be,Fe,Ge,Ue,He,Xe,We,Ke,Ye,$e,Je,Qe,Ze,tr,nr,er,rr,ir=new g,or=1e-6,ur=Math.PI,ar=ur/2,sr=ur/4,cr=2*ur,lr=180/ur,fr=ur/180,hr=Math.abs,pr=Math.atan,dr=Math.atan2,vr=Math.cos,_r=Math.ceil,yr=Math.exp,gr=Math.log,mr=(Math.pow,Math.sin),wr=(Math.sign||function(t){return t>0?1:t<0?-1:0},Math.sqrt),xr=Math.tan,br={Feature:function(t,n){k(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)k(e[r].geometry,n)}},kr={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){E(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)E(e[r],n,0)},Polygon:function(t,n){S(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)S(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)k(e[r],n)}},Er=function(t,n){t&&br.hasOwnProperty(t.type)?br[t.type](t,n):k(t,n)},Sr=(qe(),qe(),qe(),{sphere:b,point:C,lineStart:q,lineEnd:L,polygonStart:function(){Sr.lineStart=D,Sr.lineEnd=V},polygonEnd:function(){Sr.lineStart=q,Sr.lineEnd=L}}),Mr=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),e};G.invert=G;var Ar,Tr,jr,Nr,Or,Pr,Cr,Ir,qr=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:b,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},zr=function(t,n,e,r,i,o){var u,a=t[0],s=t[1],c=n[0],l=n[1],f=0,h=1,p=c-a,d=l-s;if(u=e-a,p||!(u>0)){if(u/=p,p<0){if(u<f)return;u<h&&(h=u)}else if(p>0){if(u>h)return;u>f&&(f=u)}if(u=i-a,p||!(u<0)){if(u/=p,p<0){if(u>h)return;u>f&&(f=u)}else if(p>0){if(u<f)return;u<h&&(h=u)}if(u=r-s,d||!(u>0)){if(u/=d,d<0){if(u<f)return;u<h&&(h=u)}else if(d>0){if(u>h)return;u>f&&(f=u)}if(u=o-s,d||!(u<0)){if(u/=d,d<0){if(u>h)return;u>f&&(f=u)}else if(d>0){if(u<f)return;u<h&&(h=u)}return f>0&&(t[0]=a+f*p,t[1]=s+f*d),h<1&&(n[0]=a+h*p,n[1]=s+h*d),!0}}}}},Rr=function(t,n){return hr(t[0]-n[0])<or&&hr(t[1]-n[1])<or},Lr=function(t,n,e,r,i){var o,u,a=[],s=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(Rr(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a.push(e=new $(r,t,null,!0)),s.push(e.o=new $(r,null,e,!1)),a.push(e=new $(u,t,null,!1)),s.push(e.o=new $(u,null,e,!0))}}),a.length){for(s.sort(n),J(a),J(s),o=0,u=s.length;o<u;++o)s[o].e=e=!e;for(var c,l,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=c.length;o<u;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}},Dr=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},Vr=function(t){return 1===t.length&&(t=Q(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}},Br=Vr(Dr),Fr=(Br.right,Array.prototype),Gr=(Fr.slice,Fr.map,function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}),Ur=(Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),function(t,n){var e,r,i=-1,o=t.length;if(null==n){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o;)if(null!=(r=n(t[i],i,t))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n(t[i],i,t))&&r>e&&(e=r)}return e}),Hr=function(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--u]=r[n];return e},Xr=1e9,Wr=-Xr,Kr=(qe(),function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return Gr(_r(o/_)*_,i,_).map(h).concat(Gr(_r(c/y)*y,s,y).map(p)).concat(Gr(_r(r/d)*d,e,d).filter(function(t){return hr(t%_)>or}).map(l)).concat(Gr(_r(a/v)*v,u,v).filter(function(t){return hr(t%y)>or}).map(f))}var e,r,i,o,u,a,s,c,l,f,h,p,d=10,v=d,_=90,y=360,g=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(s).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],c=+n[0][1],s=+n[1][1],o>i&&(n=o,o=i,i=n),c>s&&(n=c,c=s,s=n),t.precision(g)):[[o,c],[i,s]]},t.extentMinor=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],a=+n[0][1],u=+n[1][1],r>e&&(n=r,r=e,e=n),a>u&&(n=a,a=u,u=n),t.precision(g)):[[r,a],[e,u]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(_=+n[0],y=+n[1],t):[_,y]},t.stepMinor=function(n){return arguments.length?(d=+n[0],v=+n[1],t):[d,v]},t.precision=function(n){return arguments.length?(g=+n,l=tt(a,u,90),f=nt(r,e,g),h=tt(c,s,90),p=nt(o,i,g),t):g},t.extentMajor([[-180,-90+or],[180,90-or]]).extentMinor([[-180,-80-or],[180,80+or]])}),Yr=function(t){return t},$r=qe(),Jr=qe(),Qr={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Qr.lineStart=et,Qr.lineEnd=ot},polygonEnd:function(){Qr.lineStart=Qr.lineEnd=Qr.point=b,$r.add(hr(Jr)),Jr.reset()},result:function(){var t=$r/2;return $r.reset(),t}},Zr=1/0,ti=Zr,ni=-Zr,ei=ni,ri={point:ut,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b,result:function(){var t=[[Zr,ti],[ni,ei]];return ni=ei=-(ti=Zr=1/0),t}},ii=0,oi=0,ui=0,ai=0,si=0,ci=0,li=0,fi=0,hi=0,pi={point:at,lineStart:st,lineEnd:ft,polygonStart:function(){pi.lineStart=ht,pi.lineEnd=pt},polygonEnd:function(){pi.point=at,pi.lineStart=st,pi.lineEnd=ft},result:function(){var t=hi?[li/hi,fi/hi]:ci?[ai/ci,si/ci]:ui?[ii/ui,oi/ui]:[NaN,NaN];return ii=oi=ui=ai=si=ci=li=fi=hi=0,t}};_t.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,cr)}},result:b},yt.prototype={_circle:gt(4.5),pointRadius:function(t){return this._circle=gt(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var di=function(){function t(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Er(t,e(i))),i.result()}var n,e,r,i,o=4.5;return t.area=function(t){return Er(t,e(Qr)),Qr.result()},t.bounds=function(t){return Er(t,e(ri)),ri.result()},t.centroid=function(t){return Er(t,e(pi)),pi.result()},t.projection=function(r){return arguments.length?(e=null==(n=r)?Yr:r.stream,t):n},t.context=function(n){return arguments.length?(i=null==(r=n)?new yt:new _t(n),"function"!=typeof o&&i.pointRadius(o),t):r},t.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(i.pointRadius(+n),+n),t):o},t.projection(null).context(null)},vi=qe(),_i=function(t,n){var e=n[0],r=n[1],i=[mr(e),-vr(e),0],o=0,u=0;vi.reset();for(var a=0,s=t.length;a<s;++a)if(l=(c=t[a]).length)for(var c,l,f=c[l-1],h=f[0],p=f[1]/2+sr,d=mr(p),v=vr(p),_=0;_<l;++_,h=g,d=w,v=b,f=y){var y=c[_],g=y[0],m=y[1]/2+sr,w=mr(m),b=vr(m),k=g-h,E=k>=0?1:-1,S=E*k,M=S>ur,T=d*w;if(vi.add(dr(T*E*mr(S),v*b+T*vr(S))),o+=M?k+E*cr:k,M^h>=e^g>=e){var N=j(A(f),A(y));P(N);var O=j(i,N);P(O);var C=(M^k>=0?-1:1)*x(O[2]);(r>C||r===C&&(N[0]||N[1]))&&(u+=M^k>=0?1:-1)}}return(o<-or||o<or&&vi<-or)^1&u},yi=function(t,n,e,r){return function(i,o){function u(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function a(t,n){var e=i(t,n);_.point(e[0],e[1])}function s(){x.point=a,_.lineStart()}function c(){x.point=u,_.lineEnd()}function l(t,n){v.push([t,n]);var e=i(t,n);m.point(e[0],e[1])}function f(){m.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),m.lineEnd();var t,n,e,r,i=m.clean(),u=g.result(),a=u.length;if(v.pop(),p.push(v),v=null,a)if(1&i){if(e=u[0],(n=e.length-1)>0){for(w||(o.polygonStart(),w=!0),o.lineStart(),t=0;t<n;++t)o.point((r=e[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&u.push(u.pop().concat(u.shift())),d.push(u.filter(mt))}var p,d,v,_=n(o),y=i.invert(r[0],r[1]),g=qr(),m=n(g),w=!1,x={point:u,lineStart:s,lineEnd:c,polygonStart:function(){x.point=l,x.lineStart=f,x.lineEnd=h,d=[],p=[]},polygonEnd:function(){x.point=u,x.lineStart=s,x.lineEnd=c,d=Hr(d);var t=_i(p,y);d.length?(w||(o.polygonStart(),w=!0),Lr(d,wt,t,e,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}},gi=yi(function(){return!0},xt,kt,[-ur,-ar]),mi=function(t,n){function e(e,r,i,o){K(o,t,n,i,e,r)}function r(t,n){return vr(t)*vr(n)>a}function i(t){var n,e,i,a,l;return{lineStart:function(){a=i=!1,l=1},point:function(f,h){var p,d=[f,h],v=r(f,h),_=s?v?0:u(f,h):v?u(f+(f<0?ur:-ur),h):0;if(!n&&(a=i=v)&&t.lineStart(),v!==i&&(p=o(n,d),(Rr(n,p)||Rr(d,p))&&(d[0]+=or,d[1]+=or,v=r(d[0],d[1]))),v!==i)l=0,v?(t.lineStart(),p=o(d,n),t.point(p[0],p[1])):(p=o(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(c&&n&&s^v){var y;_&e||!(y=o(d,n,!0))||(l=0,s?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||n&&Rr(n,d)||t.point(d[0],d[1]),n=d,i=v,e=_},lineEnd:function(){i&&t.lineEnd(),n=null},clean:function(){return l|(a&&i)<<1}}}function o(t,n,e){var r=A(t),i=A(n),o=[1,0,0],u=j(r,i),s=T(u,u),c=u[0],l=s-c*c;if(!l)return!e&&t;var f=a*s/l,h=-a*c/l,p=j(o,u),d=O(o,f),v=O(u,h);N(d,v);var _=p,y=T(d,_),g=T(_,_),m=y*y-g*(T(d,d)-1);if(!(m<0)){var w=wr(m),x=O(_,(-y-w)/g);if(N(x,d),x=M(x),!e)return x;var b,k=t[0],E=n[0],S=t[1],P=n[1];E<k&&(b=k,k=E,E=b);var C=E-k,I=hr(C-ur)<or,q=I||C<or;if(!I&&P<S&&(b=S,S=P,P=b),q?I?S+P>0^x[1]<(hr(x[0]-k)<or?S:P):S<=x[1]&&x[1]<=P:C>ur^(k<=x[0]&&x[0]<=E)){var z=O(_,(-y+w)/g);return N(z,d),[x,M(z)]}}}function u(n,e){var r=s?t:ur-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var a=vr(t),s=a>0,c=hr(a)>or;return yi(r,i,e,s?[0,-t]:[-ur,t-ur])};St.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wi=16,xi=vr(30*fr),bi=function(t,n){return+n?Nt(t,n):jt(t)},ki=Et({point:function(t,n){this.stream.point(t*fr,n*fr)}}),Ei=function(){return Ct(It).scale(155.424).center([0,33.6442])},Si=function(){return Ei().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Mi=function(){function t(t){var n=t[0],e=t[1];return u=null,r.point(n,e),u||(i.point(n,e),u)||(o.point(n,e),u)}var n,e,r,i,o,u,a=Si(),s=Ei().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Ei().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){u=[t,n]}};return t.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},t.stream=function(t){return n&&e===t?n:n=qt([a.stream(e=t),s.stream(t),c.stream(t)])},t.precision=function(n){return arguments.length?(a.precision(n),s.precision(n),c.precision(n),t):a.precision()},t.scale=function(n){return arguments.length?(a.scale(n),s.scale(.35*n),c.scale(n),t.translate(a.translate())):a.scale()},t.translate=function(n){if(!arguments.length)return a.translate();var e=a.scale(),u=+n[0],f=+n[1];return r=a.translate(n).clipExtent([[u-.455*e,f-.238*e],[u+.455*e,f+.238*e]]).stream(l),i=s.translate([u-.307*e,f+.201*e]).clipExtent([[u-.425*e+or,f+.12*e+or],[u-.214*e-or,f+.234*e-or]]).stream(l),o=c.translate([u-.205*e,f+.212*e]).clipExtent([[u-.214*e+or,f+.166*e+or],[u-.115*e-or,f+.234*e-or]]).stream(l),t},t.fitExtent=Tt(t),t.fitSize=At(t),t.scale(1070)},Ai=zt(function(t){return wr(2/(1+t))});Ai.invert=Rt(function(t){return 2*x(t/2)});var Ti=zt(function(t){return(t=w(t))&&t/mr(t)});Ti.invert=Rt(function(t){return t}),Lt.invert=function(t,n){return[t,2*pr(yr(n))-ar]};var ji=function(){return Dt(Lt).scale(961/cr)};Vt.invert=Vt;var Ni=function(){return Ot(Vt).scale(152.63)};Bt.invert=Rt(pr),Ft.invert=Rt(x);var Oi=function(){return Ot(Ft).scale(249.5).clipAngle(90+or)};Gt.invert=function(t,n){return[-n,2*pr(yr(t))-ar]};var Pi=Math.PI,Ci=2*Pi,Ii=1e-6,qi=Ci-Ii;Ut.prototype=Ht.prototype={constructor:Ut,moveTo:function(t,n){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(t,n){this._.push("L",this._x1=+t,",",this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._.push("Q",+t,",",+n,",",this._x1=+e,",",this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._.push("C",+t,",",+n,",",+e,",",+r,",",this._x1=+i,",",this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,u=this._y1,a=e-t,s=r-n,c=o-t,l=u-n,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._.push("M",this._x1=t,",",this._y1=n);else if(f>Ii)if(Math.abs(l*a-s*c)>Ii&&i){var h=e-o,p=r-u,d=a*a+s*s,v=h*h+p*p,_=Math.sqrt(d),y=Math.sqrt(f),g=i*Math.tan((Pi-Math.acos((d+f-v)/(2*_*y)))/2),m=g/y,w=g/_;Math.abs(m-1)>Ii&&this._.push("L",t+m*c,",",n+m*l),this._.push("A",i,",",i,",0,0,",+(l*h>c*p),",",this._x1=t+w*a,",",this._y1=n+w*s)}else this._.push("L",this._x1=t,",",this._y1=n)},arc:function(t,n,e,r,i,o){t=+t,n=+n,e=+e;var u=e*Math.cos(r),a=e*Math.sin(r),s=t+u,c=n+a,l=1^o,f=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._.push("M",s,",",c):(Math.abs(this._x1-s)>Ii||Math.abs(this._y1-c)>Ii)&&this._.push("L",s,",",c),e&&(f>qi?this._.push("A",e,",",e,",0,1,",l,",",t-u,",",n-a,"A",e,",",e,",0,1,",l,",",this._x1=s,",",this._y1=c):(f<0&&(f=f%Ci+Ci),this._.push("A",e,",",e,",0,",+(f>=Pi),",",l,",",this._x1=t+e*Math.cos(i),",",this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+n,"h",+e,"v",+r,"h",-e,"Z")},toString:function(){return this._.join("")}};var zi=function(t){return function(){return t}},Ri=1e-12,Li=Math.PI,Di=2*Li;Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Vi=function(t){return new Xt(t)};Kt(Vi),Wt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var Bi={draw:function(t,n){var e=Math.sqrt(n/Li);t.moveTo(e,0),t.arc(0,0,e,0,Di)}},Fi=(Math.sqrt(1/3),Math.sin(Li/10)/Math.sin(7*Li/10)),Gi=(Math.sin(Di/10)*Fi,-Math.cos(Di/10)*Fi,Math.sqrt(3),-.5),Ui=Math.sqrt(3)/2,Hi=1/Math.sqrt(12),Xi=3*(Hi/2+1),Wi={draw:function(t,n){var e=Math.sqrt(n/Xi),r=e/2,i=e*Hi,o=r,u=e*Hi+e,a=-o,s=u;t.moveTo(r,i),t.lineTo(o,u),t.lineTo(a,s),t.lineTo(Gi*r-Ui*i,Ui*r+Gi*i),t.lineTo(Gi*o-Ui*u,Ui*o+Gi*u),t.lineTo(Gi*a-Ui*s,Ui*a+Gi*s),t.lineTo(Gi*r+Ui*i,Gi*i-Ui*r),t.lineTo(Gi*o+Ui*u,Gi*u-Ui*o),t.lineTo(Gi*a+Ui*s,Gi*s-Ui*a),t.closePath()}},Ki=function(){function t(){var t;if(r||(r=t=Ht()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),t)return r=null,t+""||null}var n=zi(Bi),e=zi(64),r=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:zi(e),t):n},t.size=function(n){return arguments.length?(e="function"==typeof n?n:zi(+n),t):e},t.context=function(n){return arguments.length?(r=null==n?null:n,t):r},t},Yi=function(){};$t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yt(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Jt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this,n=this._x,e=this._y,r=n.length-1;if(r>0)for(var i,o=n[0],u=e[0],a=n[r]-o,s=e[r]-u,c=-1;++c<=r;)i=c/r,t._basis.point(t._beta*n[c]+(1-t._beta)*(o+i*a),t._beta*e[c]+(1-t._beta)*(u+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}},function t(n){function e(t){return 1===n?new $t(t):new Jt(t,n)}return e.beta=function(n){return t(+n)},e}(.85),Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Qt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new Zt(t,n)}return e.tension=function(n){return t(+n)},e}(0),tn.prototype={areaStart:Yi,areaEnd:Yi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Qt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new tn(t,n)}return e.tension=function(n){return t(+n)},e}(0),nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new nn(t,n)}return e.tension=function(n){return t(+n)},e}(0),rn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:en(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new rn(t,n):new Zt(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),on.prototype={areaStart:Yi,areaEnd:Yi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:en(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new on(t,n):new tn(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),un.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:en(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new un(t,n):new nn(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),fn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ln(this,this._t0,cn(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,ln(this,cn(this,e=sn(this,t,n)),e);break;default:ln(this,this._t0,e=sn(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(hn.prototype=Object.create(fn.prototype)).point=function(t,n){fn.prototype.point.call(this,n,t)},pn.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},
lineEnd:function(){var t=this,n=this._x,e=this._y,r=n.length;if(r)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),2===r)this._context.lineTo(n[1],e[1]);else for(var i=vn(n),o=vn(e),u=0,a=1;a<r;++u,++a)t._context.bezierCurveTo(i[0][u],o[0][u],i[1][u],o[1][u],n[a],e[a]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var $i=(Array.prototype.slice,function(){}),Ji=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return mn(t,n)})}:mn(t,n)},Qi=function(t,n){function e(n){var e,r=t.arcs[n<0?~n:n],i=r[0];return t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1],n<0?[e,i]:[i,e]}function r(t,n){for(var e in t){var r=t[e];delete n[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),a.push(r)}}var i={},o={},u={},a=[],s=-1;return n.forEach(function(e,r){var i,o=t.arcs[e<0?~e:e];o.length<3&&!o[1][0]&&!o[1][1]&&(i=n[++s],n[s]=e,n[r]=i)}),n.forEach(function(t){var n,r,i=e(t),a=i[0],s=i[1];if(n=u[a])if(delete u[n.end],n.push(t),n.end=s,r=o[s]){delete o[r.start];var c=r===n?n:n.concat(r);o[c.start=n.start]=u[c.end=r.end]=c}else o[n.start]=u[n.end]=n;else if(n=o[s])if(delete o[n.start],n.unshift(t),n.start=a,r=u[a]){delete u[r.end];var l=r===n?n:r.concat(n);o[l.start=r.start]=u[l.end=n.end]=l}else o[n.start]=u[n.end]=n;else n=[t],o[n.start=a]=u[n.end=s]=n}),r(u,o),r(o,u),n.forEach(function(t){i[t<0?~t:t]||a.push([t])}),a},Zi=function(t){return wn(t,xn.apply(this,arguments))},to=function(t){function n(t,n){t.forEach(function(t){t<0&&(t=~t);var e=i[t];e?e.push(n):i[t]=[n]})}function e(t,e){t.forEach(function(t){n(t,e)})}function r(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,n)}):t.type in u&&u[t.type](t.arcs,n)}var i={},o=t.map(function(){return[]}),u={LineString:n,MultiLineString:e,Polygon:e,MultiPolygon:function(t,n){t.forEach(function(t){e(t,n)})}};t.forEach(r);for(var a in i)for(var s=i[a],c=s.length,l=0;l<c;++l)for(var f=l+1;f<c;++f){var h,p=s[l],d=s[f];(h=o[p])[a=gn(h,d)]!==d&&h.splice(a,0,d),(h=o[d])[a=gn(h,p)]!==p&&h.splice(a,0,p)}return o},no=Math.abs,eo=Math.atan,ro=Math.atan2,io=Math.cos,oo=Math.exp,uo=Math.floor,ao=Math.log,so=Math.max,co=Math.min,lo=Math.pow,fo=(Math.round,Math.sign||function(t){return t>0?1:t<0?-1:0}),ho=Math.sin,po=Math.tan,vo=1e-6,_o=1e-12,yo=Math.PI,go=yo/2,mo=yo/4,wo=Math.SQRT1_2,xo=Sn(2),bo=Sn(yo),ko=180/yo,Eo=yo/180;On.invert=function(t,n){if(!(t*t+4*n*n>yo*yo+vo)){var e=t,r=n,i=25;do{var o,u=ho(e),a=ho(e/2),s=io(e/2),c=ho(r),l=io(r),f=ho(2*r),h=c*c,p=l*l,d=a*a,v=1-p*s*s,_=v?En(l*s)*Sn(o=1/v):o=0,y=2*_*l*a-t,g=_*c-n,m=o*(p*d+_*l*s*h),w=o*(.5*u*f-2*_*c*a),x=.25*o*(f*a-_*c*p*u),b=o*(h*s+_*d*l),k=w*x-b*m;if(!k)break;var E=(g*w-y*b)/k,S=(y*x-g*m)/k;e-=E,r-=S}while((no(E)>vo||no(S)>vo)&&--i>0);return[e,r]}},Pn.invert=function(t,n){if(t*=3/8,n*=3/8,!t&&no(n)>1)return null;var e=t*t,r=n*n,i=1+e+r,o=Sn((i-Sn(i*i-4*n*n))/2),u=kn(o)/3,a=o?Nn(no(n/o))/3:jn(no(t))/3,s=io(u),c=Tn(a),l=c*c-s*s;return[2*fo(t)*ro(An(a)*s,.25-l),2*fo(n)*ro(c*ho(u),.25+l)]};var So=Sn(8),Mo=ao(1+xo);Cn.invert=function(t,n){if((r=no(n))<Mo)return[t,2*eo(oo(n))-go];var e,r,i=mo,o=25;do{var u=io(i/2),a=po(i/2);i-=e=(So*(i-mo)-ao(a)-r)/(So-u*u/(2*a))}while(no(e)>_o&&--o>0);return[t/(io(i)*(So-1/ho(i))),fo(n)*i]};var Ao=qn(xo/go,xo,yo),To=2.00276,jo=1.11072;zn.invert=function(t,n){var e,r,i=To*n,o=n<0?-mo:mo,u=25;do r=i-xo*ho(o),o-=e=(ho(2*o)+2*o-yo*ho(r))/(2*io(2*o)+2+yo*io(r)*xo*io(o));while(no(e)>vo&&--u>0);return r=i-xo*ho(o),[t*(1/io(r)+jo/io(o))/To,r]},Rn.invert=function(t,n){return[t/io(n),n]},qn(1,4/yo,yo),Ln.invert=function(t,n){var e=(e=n/bo-1)*e;return[e>0?t*Sn(yo/e)/2:0,kn(1-e)]},Vn.invert=function(t,n){var e=2-no(n)/Sn(2*yo/3);return[t*Sn(6*yo)/(2*e),fo(n)*kn((4-e*e)/3)]},Bn.invert=function(t,n){var e=1+go,r=Sn(e/2);return[2*t*r/(1+io(n*=r)),kn((n+ho(n))/e)]};var No=3+2*xo;Fn.invert=function(t,n){if(!(e=Pn.invert(t/1.2,1.065*n)))return null;var e,r=e[0],i=e[1],o=20;t/=No,n/=No;do{var u=r/2,a=i/2,s=ho(u),c=io(u),l=ho(a),f=io(a),h=io(i),p=Sn(h),d=l/(f+xo*c*p),v=d*d,_=Sn(2/(1+v)),y=xo*f+(c+s)*p,g=xo*f+(c-s)*p,m=y/g,w=Sn(m),x=w-1/w,b=w+1/w,k=_*x-2*ao(w)-t,E=_*d*b-2*eo(d)-n,S=l&&wo*p*s*v/l,M=(xo*c*f+p)/(2*(f+xo*c*p)*(f+xo*c*p)*p),A=-.5*d*_*_*_,T=A*S,j=A*M,N=(N=2*f+xo*p*(c-s))*N*w,O=(xo*c*f*p+h)/N,P=-(xo*s*l)/(p*N),C=x*T-2*O/w+_*(O+O/m),I=x*j-2*P/w+_*(P+P/m),q=d*b*T-2*S/(1+v)+_*b*S+_*d*(O-O/m),z=d*b*j-2*M/(1+v)+_*b*M+_*d*(P-P/m),R=I*q-z*C;if(!R)break;var L=(E*I-k*z)/R,D=(k*q-E*C)/R;r-=L,i=so(-go,co(go,i-D))}while((no(L)>vo||no(D)>vo)&&--o>0);return no(no(i)-go)<vo?[0,i]:o&&[r,i]};var Oo=function(t,n,e,r,i,o,u,a){function s(s,c){if(!c)return[t*s/yo,0];var l=c*c,f=t+l*(n+l*(e+l*r)),h=c*(i-1+l*(o-a+l*u)),p=(f*f+h*h)/(2*h),d=s*kn(f/p)/yo;return[p*ho(d),c*(1+l*a)+p*(1-io(d))]}return arguments.length<8&&(a=0),s.invert=function(s,c){var l,f,h=yo*s/t,p=c,d=50;do{var v=p*p,_=t+v*(n+v*(e+v*r)),y=p*(i-1+v*(o-a+v*u)),g=_*_+y*y,m=2*y,w=g/m,x=w*w,b=kn(_/w)/yo,k=h*b,E=_*_,S=(2*n+v*(4*e+6*v*r))*p,M=i+v*(3*o+5*v*u),A=2*(_*S+y*(M-1)),T=2*(M-1),j=(A*m-g*T)/(m*m),N=io(k),O=ho(k),P=w*N,C=w*O,I=h/yo*(1/Sn(1-E/x))*(S*w-_*j)/x,q=C-s,z=p*(1+v*a)+w-P-c,R=j*O+P*I,L=P*b,D=1+j-(j*N-C*I),V=C*b,B=R*V-D*L;if(!B)break;h-=l=(z*R-q*D)/B,p-=f=(q*V-z*L)/B}while((no(l)>vo||no(f)>vo)&&--d>0);return[h,p]},s};Oo(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Oo(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Oo(5/6*yo,-.62636,-.0344,0,1.3493,-.05524,0,.045),Gn.invert=function(t,n){var e,r=t,i=n,o=50;do{var u=i*i;i-=e=(i*(1+u/12)-n)/(1+u/4)}while(no(e)>vo&&--o>0);o=50,t/=1-.162388*u;do{var a=(a=r*r)*a;r-=e=(r*(.87-952426e-9*a)-t)/(.87-.00476213*a)}while(no(e)>vo&&--o>0);return[r,i]};var Po=(Oo(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),function(t){function n(n,r){var i=n>0?-.5:.5,o=t(n+i*yo,r);return o[0]-=i*e,o}var e=t(go,0)[0]-t(-go,0)[0];return t.invert&&(n.invert=function(n,r){var i=n>0?-.5:.5,o=t.invert(n+i*e,r),u=o[0]-i*yo;return u<-yo?u+=2*yo:u>yo&&(u-=2*yo),o[0]=u,o}),n});Un.invert=function(t,n){var e=fo(t),r=fo(n),i=-e*t,o=-r*n,u=o/i<1,a=Xn(u?o:i,u?i:o),s=a[0],c=a[1],l=io(c);return u&&(s=-go-s),[e*(ro(ho(s)*l,-ho(c))+yo),r*kn(io(s)*l)]};var Co=function(t){function n(n,r){var i=no(n)<go,o=t(i?n:n>0?n-yo:n+yo,r),u=(o[0]-o[1])*wo,a=(o[0]+o[1])*wo;if(i)return[u,a];var s=e*wo,c=u>0^a>0?-1:1;return[c*u-fo(a)*s,c*a-fo(u)*s]}var e=t(go,0)[0]-t(-go,0)[0];return t.invert&&(n.invert=function(n,r){var i=(n+r)*wo,o=(r-n)*wo,u=no(i)<.5*e&&no(o)<.5*e;if(!u){var a=e*wo,s=i>0^o>0?-1:1,c=-s*(n+(o>0?1:-1)*a),l=-s*(r+(i>0?1:-1)*a);i=(-c-l)*wo,o=(c-l)*wo}var f=t.invert(i,o);return u||(f[0]+=i>0?yo:-yo),f}),n};Jn.invert=function(t,n){var e=(xo-1)/(xo+1),r=Sn(1-e*e),i=$n(go,r*r),o=-1,u=Wn(.5*i-n,-t,r*r),a=Zn(u[0],u[1]),s=ro(a[1],a[0])/o;return[s,2*eo(oo(.5/o*ao(e*a[0]*a[0]+e*a[1]*a[1])))-go]};var Io=function(){return Ot(Po(Jn)).scale(151.496)};te.invert=function(t,n){var e=2*kn(n/2);return[t*io(e/2)/io(e),e]};var qo=(Dn(0),.7109889596207567),zo=.0528035274542;ne.invert=function(t,n){return n>-qo?Ao.invert(t,n-zo):Rn.invert(t,n)},ee.invert=function(t,n){return no(n)>qo?Ao.invert(t,n+(n>0?zo:-zo)):Rn.invert(t,n)};var Ro=function(t,n){function e(e,r){for(var i=r<0?-1:1,o=n[+(r<0)],u=0,a=o.length-1;u<a&&e>o[u][2][0];++u);var s=t(e-o[u][1][0],r);return s[0]+=t(o[u][1][0],i*r>i*o[u][0][1]?o[u][0][1]:r)[0],s}var r=oe(n);n=n.map(function(t){return t.map(function(t){return[[t[0][0]*Eo,t[0][1]*Eo],[t[1][0]*Eo,t[1][1]*Eo],[t[2][0]*Eo,t[2][1]*Eo]]})});var i=n.map(function(n){return n.map(function(n){var e,r=t(n[0][0],n[0][1])[0],i=t(n[2][0],n[2][1])[0],o=t(n[1][0],n[0][1])[1],u=t(n[1][0],n[1][1])[1];return o>u&&(e=o,o=u,u=e),[[r,o],[i,u]]})}),o=Ot(e),u=o.stream;return t.invert&&(e.invert=function(r,o){for(var u=i[+(o<0)],a=n[+(o<0)],s=0,c=u.length;s<c;++s){var l=u[s];if(l[0][0]<=r&&r<l[1][0]&&l[0][1]<=o&&o<l[1][1]){var f=t.invert(r-t(a[s][1][0],0)[0],o);return f[0]+=a[s][1][0],re(e(f[0],f[1]),[r,o])?f:null}}}),o.stream=function(t){var n=o.rotate(),e=u(t),i=(o.rotate([0,0]),u(t));return o.rotate(n),e.sphere=function(){Er(r,i)},e},o},Lo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Do=function(){return Ro(zn,Lo).scale(160.857)},Vo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Bo=function(){return Ro(ee,Vo).scale(152.63)},Fo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Go=function(){return Ro(Ao,Fo).scale(169.529).rotate([20,0])};ue.invert=function(t,n){var e=fo(t)*yo,r=n/2,i=50;do{var o=e*e,u=r*r,a=e*r,s=e*(.975534+u*(-.119161+o*-.0143059+u*-.0547009))-t,c=r*(1.00384+o*(.0802894+u*-.02855+199025e-9*o)+u*(.0998909+u*-.0491032))-n,l=.975534-u*(.119161+3*o*.0143059+.0547009*u),f=-a*(.238322+.2188036*u+.0286118*o),h=a*(.1605788+7961e-7*o+-.0571*u),p=1.00384+o*(.0802894+199025e-9*o)+u*(3*(.0998909-.02855*o)-.245516*u),d=f*h-p*l,v=(c*f-s*p)/d,_=(s*h-c*l)/d;e-=v,r-=_}while((no(v)>vo||no(_)>vo)&&--i>0);return i&&[e,r]},ae.invert=function(t,n){var e=t*t,r=n*n,i=r+1,o=t?wo*Sn((i-Sn(e*e+2*e*(r-1)+i*i))/e+1):1/Sn(i);return[kn(t*o),fo(n)*En(o)]},se.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,u=o*o;r-=e=(r*(1.007226+o*(.015085+u*(-.044475+.028874*o-.005916*u)))-n)/(1.007226+o*(.045255+u*(-.311325+.259866*o-.005916*11*u)))}while(no(e)>vo&&--i>0);return[t/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};var Uo=1.0148,Ho=.23185,Xo=-.14499,Wo=.02406,Ko=Uo,Yo=5*Ho,$o=7*Xo,Jo=9*Wo,Qo=1.790857183;ce.invert=function(t,n){n>Qo?n=Qo:n<-Qo&&(n=-Qo);var e,r=n;do{var i=r*r;r-=e=(r*(Uo+i*i*(Ho+i*(Xo+Wo*i)))-n)/(Ko+i*i*(Yo+i*($o+Jo*i)))}while(no(e)>vo);return[t,r]};var Zo=function(){return Ot(ce).scale(139.319)},tu=function(){return Ot(Co(Jn)).scale(111.48).rotate([-90,-90,45]).clipAngle(179.999)};le.invert=function(t,n){if(no(n)<vo)return[t,0];var e,r=t*t+n*n,i=.5*n,o=10;do{var u=po(i),a=1/io(i),s=r-2*n*i+i*i;i-=e=(u*s+2*(i-n))/(2+s*a*a+2*(i-n)*u)}while(no(e)>vo&&--o>0);return u=po(i),[(no(n)<no(i+1/u)?kn(t*u):fo(t)*(En(no(t*u))+go))/ho(i),i]};var nu=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];nu.forEach(function(t){t[1]*=1.0144}),fe.invert=function(t,n){var e=n/go,r=90*e,i=co(18,no(r/5)),o=so(0,uo(i));do{var u=nu[o][1],a=nu[o+1][1],s=nu[co(19,o+2)][1],c=s-u,l=s-2*a+u,f=2*(no(e)-a)/c,h=l/c,p=f*(1-h*f*(1-2*h*f));if(p>=0||1===o){r=(n>=0?5:-5)*(p+i);var d,v=50;do i=co(18,no(r)/5),o=uo(i),p=i-o,u=nu[o][1],a=nu[o+1][1],s=nu[co(19,o+2)][1],r-=(d=(n>=0?go:-go)*(a+p*(s-u)/2+p*p*(s-2*a+u)/2)-n)*ko;while(no(d)>_o&&--v>0);break}}while(--o>=0);var _=nu[o][0],y=nu[o+1][0],g=nu[co(19,o+2)][0];return[t/(y+p*(g-_)/2+p*p*(g-2*y+_)/2),r*Eo]},he.invert=function(t,n){if(no(n)<vo)return[t,0];if(no(t)<vo)return[0,go*ho(2*eo(n/yo))];var e=(t/=yo)*t,r=(n/=yo)*n,i=e+r,o=i*i,u=-no(n)*(1+i),a=u-2*r+e,s=-2*u+1+2*r+o,c=r/s+(2*a*a*a/(s*s*s)-9*u*a/(s*s))/27,l=(u-a*a/(3*s))/s,f=2*Sn(-l/3),h=En(3*c/(l*f))/3;return[yo*(i-1+Sn(1+2*(e-r)+o))/(2*t),fo(n)*yo*(-f*io(h+yo/3)-a/(3*s))]},pe.invert=function(t,n){if(!t)return[0,go*ho(2*eo(n/yo))];var e=no(t/yo),r=(1-e*e-(n/=yo)*n)/(2*e),i=r*r,o=Sn(i+1);return[fo(t)*yo*(o-r),fo(n)*go*ho(2*ro(Sn((1-2*r*e)*(r+o)-e),Sn(o+r+e)))]},de.invert=function(t,n){if(!n)return[t,0];var e=n/yo,r=(yo*yo*(1-e*e)-t*t)/(2*yo*t);return[t?yo*(fo(t)*Sn(r*r+1)-r):0,go*ho(2*eo(e))]},ve.invert=function(t,n){var e;if(!t||!n)return[t,n];n/=yo;var r=fo(t)*t/go,i=(r*r-1+4*n*n)/no(r),o=i*i,u=2*n,a=50;do{var s=u*u,c=(8*u-s*(s+2)-5)/(2*s*(u-1)),l=(3*u-s*u-10)/(2*s*u),f=c*c,h=u*c,p=u+c,d=p*p,v=u+3*c,_=d*(s+f*o-1)+(1-s)*(s*(v*v+4*f)+f*(12*h+4*f)),y=-2*p*(4*h*f+(1-4*s+3*s*s)*(1+l)+f*(-6+14*s-o+(-8+8*s-2*o)*l)+h*(-8+12*s+(-10+10*s-o)*l)),g=Sn(_),m=i*(d+f-1)+2*g-r*(4*d+o),w=i*(2*c*l+2*p*(1+l))+y/g-8*p*(i*(-1+f+d)+2*g)*(1+l)/(o+4*d);u-=e=m/w}while(e>vo&&--a>0);return[fo(t)*(Sn(i*i+4)+i)*yo/4,go*u]};var eu=4*yo+3*Sn(3),ru=2*Sn(2*yo*Sn(3)/eu);qn(ru*Sn(3)/yo,ru,eu/6),_e.invert=function(t,n){var e=t,r=n,i=25;do{var o,u=io(r),a=ho(r),s=ho(2*r),c=a*a,l=u*u,f=ho(e),h=io(e/2),p=ho(e/2),d=p*p,v=1-l*h*h,_=v?En(u*h)*Sn(o=1/v):o=0,y=.5*(2*_*u*p+e/go)-t,g=.5*(_*a+r)-n,m=.5*o*(l*d+_*u*h*c)+.5/go,w=o*(f*s/4-_*a*p),x=.125*o*(s*p-_*a*l*f),b=.5*o*(c*h+_*d*u)+.5,k=w*x-b*m,E=(g*w-y*b)/k,S=(y*x-g*m)/k;e-=E,r-=S}while((no(E)>vo||no(S)>vo)&&--i>0);return[e,r]};var iu=["#00ce5c","#d800a2","#00d9d2","#AF5100","#bfbfbf","#DE0000","#F0DE00","#9200ff","#ED9200","#00aeff"],ou=["#56d58e","#d95cba","#63eae4","#C78348","#d6d6d6","#E06363","#FFF741","#965ede","#FCBB54","#73c5eb"],uu=["#a5e6c3","#eda3da","#9af8f4","#EDC19C","#e5e5e5","#F5AAAA","#F7EFC3","#c6a8ef","#F8D296","#addbf0"],au={green:0,pink:1,aqua:2,brown:3,grey:4,red:5,yellow:6,purple:7,orange:8,blue:9},su={standard:ou,darker:iu,lighter:uu,names:au},cu={light:{background:"#ffffff",text:"#262626",axis:"#262626",grid:"#e0e0e0",highlight:"rgba(225,16,16,0.5)",lowlight:"rgba(127,127,127,0.3)",shadow:"rgba(127,127,127,0.4)",fillOpacity:.33,negative:{background:"rgba(0, 0, 0, 0.66)",text:"#ffffff"}},dark:{background:"#333333",text:"#ffffff",axis:"#ffffff",grid:"#6d6d6d",highlight:"rgba(225,16,16,0.5)",lowlight:"rgba(127,127,127,0.5)",shadow:"rgba(255,255,255,0.4)",fillOpacity:.33,negative:{background:"rgba(255, 255, 255, 0.85)",text:"#262626"}}},lu=(ge(function(t){function n(t,n){return 1-3*n+3*t}function e(t,n){return 3*n-6*t}function r(t){return 3*t}function i(t,i,o){return((n(i,o)*t+e(i,o))*t+r(i))*t}function o(t,i,o){return 3*n(i,o)*t*t+2*e(i,o)*t+r(i)}function u(t,n,e,r,o){var u,a,s=0;do a=n+(e-n)/2,u=i(a,r,o)-t,u>0?e=a:n=a;while(Math.abs(u)>l&&++s<f);return a}function a(t,n,e,r){for(var u=0;u<s;++u){var a=o(n,e,r);if(0===a)return n;var c=i(n,e,r)-t;n-=c/a}return n}var s=4,c=.001,l=1e-7,f=10,h=11,p=1/(h-1),d="function"==typeof Float32Array;t.exports=function(t,n,e,r){function s(n){for(var r=0,i=1,s=h-1;i!==s&&l[i]<=n;++i)r+=p;--i;var f=(n-l[i])/(l[i+1]-l[i]),d=r+f*p,v=o(d,t,e);return v>=c?a(n,d,t,e):0===v?d:u(n,r,r+p,t,e)}if(!(0<=t&&t<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");var l=d?new Float32Array(h):new Array(h);if(t!==n||e!==r)for(var f=0;f<h;++f)l[f]=i(f*p,t,e);return function(o){return t===n&&e===r?o:0===o?0:1===o?1:i(s(o),n,r)}}}),{outline:.5,data:2.5,axis:1,grid:2}),fu='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',hu={fixed:{cssImport:"@import url(https://fonts.googleapis.com/css?family=Source+Code+Pro:300,500);",weightMonochrome:300,weightColor:500,sizeForWidth:me,family:'"Source Code Pro", Consolas, "Liberation Mono", Menlo, Courier, monospace'},variable:{cssImport:"@import url(https://fonts.googleapis.com/css?family=Raleway:400,500);",weightMonochrome:400,weightColor:500,sizeForWidth:me,family:'"Raleway", "Trebuchet MS", '+fu},brand:{cssImport:"@import url(https://fonts.googleapis.com/css?family=Electrolize);",weightMonochrome:400,weightColor:400,sizeForWidth:me,family:'"Electrolize", '+fu}},pu={geoAlbersUsa:Mi,geoEquirectangular:Ni,geoAlbers:Si,geoGuyou:Io,geoMercator:ji,geoOrthographic:Oi,geoPatterson:Zo,geoPeirceQuincuncial:tu,geoInterruptedHomolosine:Bo,geoInterruptedBoggs:Do,geoInterruptedMollweideHemispheres:Go},du={geoPeirceQuincuncial:{a:1,s:4.47613863},geoPatterson:{a:.5700506757,s:2*Math.PI},geoMercator:{a:1,s:2*Math.PI},geoOrthographic:{a:1,s:2}},vu=960,_u={a:.5,s:2*Math.PI},yu=4,gu=24,mu=0;n.version=be,n.html=xe,Object.defineProperty(n,"__esModule",{value:!0})})}).call(n,e(1))},function(t,n,e){!function(t,e){e(n)}(this,function(t){"use strict";function n(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Q&&n.documentElement.namespaceURI===Q?n.createElement(t):n.createElementNS(e,t)}}function e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){return new i}function i(){this._="@"+(++et).toString(36)}function o(t,n,e){return t=u(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function u(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function a(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function s(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function c(t,n,e){var r=at.hasOwnProperty(t.type)?o:u;return function(i,o,u){var a,s=this.__on,c=r(n,o,u);if(s)for(var l=0,f=s.length;l<f;++l)if((a=s[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=e),void(a.value=n);this.addEventListener(t.type,c,e),a={type:t.type,name:t.name,value:n,listener:c,capture:e},s?s.push(a):this.__on=[a]}}function l(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function f(){}function h(){return[]}function p(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function d(t,n,e,r,i,o){for(var u,a=0,s=n.length,c=o.length;a<c;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new p(t,o[a]);for(;a<s;++a)(u=n[a])&&(i[a]=u)}function v(t,n,e,r,i,o,u){var a,s,c,l={},f=n.length,h=o.length,d=new Array(f);for(a=0;a<f;++a)(s=n[a])&&(d[a]=c=xt+u.call(s,s.__data__,a,n),c in l?i[a]=s:l[c]=s);for(a=0;a<h;++a)c=xt+u.call(t,o[a],a,o),(s=l[c])?(r[a]=s,s.__data__=o[a],l[c]=null):e[a]=new p(t,o[a]);for(a=0;a<f;++a)(s=n[a])&&l[d[a]]===s&&(i[a]=s)}function _(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function y(t){return function(){this.removeAttribute(t)}}function g(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m(t,n){return function(){this.setAttribute(t,n)}}function w(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function x(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function b(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function k(t){return function(){this.style.removeProperty(t)}}function E(t,n,e){return function(){this.style.setProperty(t,n,e)}}function S(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function M(t){return function(){delete this[t]}}function A(t,n){return function(){this[t]=n}}function T(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function j(t){return t.trim().split(/^|\s+/)}function N(t){return t.classList||new O(t)}function O(t){this._node=t,this._names=j(t.getAttribute("class")||"")}function P(t,n){for(var e=N(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function C(t,n){for(var e=N(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function I(t){return function(){P(this,t)}}function q(t){return function(){C(this,t)}}function z(t,n){return function(){(n.apply(this,arguments)?P:C)(this,t)}}function R(){this.textContent=""}function L(t){return function(){this.textContent=t}}function D(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function V(){this.innerHTML=""}function B(t){return function(){this.innerHTML=t}}function F(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H(){return null}function X(){var t=this.parentNode;t&&t.removeChild(this)}function W(t,n,e){var r=It(t),i=r.CustomEvent;i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function K(t,n){return function(){return W(this,t,n)}}function Y(t,n){return function(){return W(this,t,n.apply(this,arguments))}}function $(t,n){this._groups=t,this._parents=n}function J(){return new $([[document.documentElement]],Wt)}var Q="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Z.hasOwnProperty(n)?{space:Z[n],local:t}:t},nt=function(t){var r=tt(t);return(r.local?e:n)(r)},et=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var ot=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;rt=function(t){return function(){return ot.call(this,t)}}}}var ut=rt,at={};if(t.event=null,"undefined"!=typeof document){var st=document.documentElement;"onmouseenter"in st||(at={mouseenter:"mouseover",mouseleave:"mouseout"})}var ct=function(t,n,e){var r,i,o=a(t+""),u=o.length;{if(!(arguments.length<2)){for(l=n?c:s,null==e&&(e=!1),r=0;r<u;++r)this.each(l(o[r],n,e));return this}var l=this.node().__on;if(l)for(var f,h=0,p=l.length;h<p;++h)for(r=0,f=l[h];r<u;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}},lt=function(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e},ft=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},ht=function(t){var n=lt();return n.changedTouches&&(n=n.changedTouches[0]),ft(t,n)},pt=function(t){return null==t?f:function(){return this.querySelector(t)}},dt=function(t){"function"!=typeof t&&(t=pt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],s=a.length,c=r[i]=new Array(s),l=0;l<s;++l)(o=a[l])&&(u=t.call(o,o.__data__,l,a))&&("__data__"in o&&(u.__data__=o.__data__),c[l]=u);return new $(r,this._parents)},vt=function(t){return null==t?h:function(){return this.querySelectorAll(t)}},_t=function(t){"function"!=typeof t&&(t=vt(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],s=a.length,c=0;c<s;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new $(r,i)},yt=function(t){"function"!=typeof t&&(t=ut(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,s=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&s.push(o);return new $(r,this._parents)},gt=function(t){return new Array(t.length)},mt=function(){return new $(this._enter||this._groups.map(gt),this._parents)};p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var wt=function(t){return function(){return t}},xt="$",bt=function(t,n){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var e=n?v:d,r=this._parents,i=this._groups;"function"!=typeof t&&(t=wt(t));for(var o=i.length,u=new Array(o),a=new Array(o),s=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,p=t.call(l,l&&l.__data__,c,r),_=p.length,y=a[c]=new Array(_),g=u[c]=new Array(_),m=s[c]=new Array(h);e(l,f,y,g,m,p,n);for(var w,x,b=0,k=0;b<_;++b)if(w=y[b]){for(b>=k&&(k=b+1);!(x=g[k])&&++k<_;);w._next=x||null}}return u=new $(u,r),u._enter=a,u._exit=s,u},kt=function(){return new $(this._exit||this._groups.map(gt),this._parents)},Et=function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var s,c=n[a],l=e[a],f=c.length,h=u[a]=new Array(f),p=0;p<f;++p)(s=c[p]||l[p])&&(h[p]=s);for(;a<r;++a)u[a]=n[a];return new $(u,this._parents)},St=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},Mt=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=_);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],s=a.length,c=i[o]=new Array(s),l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(n)}return new $(i,this._parents).order()},At=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Tt=function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},jt=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},Nt=function(){var t=0;return this.each(function(){++t}),t},Ot=function(){return!this.node()},Pt=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},Ct=function(t,n){var e=tt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?g:y:"function"==typeof n?e.local?b:x:e.local?w:m)(e,n))},It=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},qt=function(t,n,e){var r;return arguments.length>1?this.each((null==n?k:"function"==typeof n?S:E)(t,n,null==e?"":e)):It(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},zt=function(t,n){return arguments.length>1?this.each((null==n?M:"function"==typeof n?T:A)(t,n)):this.node()[t]};O.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Rt=function(t,n){var e=j(t+"");if(arguments.length<2){for(var r=N(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?z:n?I:q)(e,n))},Lt=function(t){return arguments.length?this.each(null==t?R:("function"==typeof t?D:L)(t)):this.node().textContent},Dt=function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?F:B)(t)):this.node().innerHTML},Vt=function(){return this.each(G)},Bt=function(){return this.each(U)},Ft=function(t){var n="function"==typeof t?t:nt(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},Gt=function(t,n){var e="function"==typeof t?t:nt(t),r=null==n?H:"function"==typeof n?n:pt(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},Ut=function(){return this.each(X)},Ht=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Xt=function(t,n){return this.each(("function"==typeof n?Y:K)(t,n))},Wt=[null];$.prototype=J.prototype={constructor:$,select:dt,selectAll:_t,filter:yt,data:bt,enter:mt,exit:kt,merge:Et,order:St,sort:Mt,call:At,nodes:Tt,node:jt,size:Nt,empty:Ot,each:Pt,attr:Ct,style:qt,property:zt,classed:Rt,text:Lt,html:Dt,raise:Vt,lower:Bt,append:Ft,insert:Gt,remove:Ut,datum:Ht,on:ct,dispatch:Xt};var Kt=function(t){return"string"==typeof t?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],Wt)},Yt=function(t){return"string"==typeof t?new $([document.querySelectorAll(t)],[document.documentElement]):new $([null==t?[]:t],Wt)},$t=function(t,n,e){arguments.length<3&&(e=n,n=lt().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return ft(t,r);return null},Jt=function(t,n){null==n&&(n=lt().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=ft(t,n[e]);return i};t.creator=nt,t.local=r,t.matcher=ut,t.mouse=ht,t.namespace=tt,t.namespaces=Z,t.select=Kt,t.selectAll=Yt,t.selection=J,t.selector=pt,t.selectorAll=vt,t.touch=$t,t.touches=Jt,t.window=It,t.customEvent=l,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,n,e){!function(t,r){r(n,e(10),e(12),e(13),e(14),e(15),e(16))}(this,function(t,n,e,r,i,o,u){"use strict";function a(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>G)throw new Error("too late");return e}function s(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>H)throw new Error("too late");return e}function c(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("too late");return e}function l(t,n,e){function i(t){e.state=U,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}function o(i){var l,f,h,p;if(e.state!==U)return a();for(l in c)if(p=c[l],p.name===e.name){if(p.state===X)return r.timeout(o);p.state===W?(p.state=Y,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete c[l]):+l<n&&(p.state=Y,p.timer.stop(),delete c[l])}if(r.timeout(function(){e.state===X&&(e.state=W,e.timer.restart(u,e.delay,e.time),u(i))}),e.state=H,e.on.call("start",t,t.__data__,e.index,e.group),e.state===H){for(e.state=X,s=new Array(h=e.tween.length),l=0,f=-1;l<h;++l)(p=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(s[++f]=p);s.length=f+1}}function u(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(a),e.state=K,1),i=-1,o=s.length;++i<o;)s[i].call(null,r);e.state===K&&(e.on.call("end",t,t.__data__,e.index,e.group),a())}function a(){e.state=Y,e.timer.stop(),delete c[n];for(var r in c)return;delete t.__transition}var s,c=t.__transition;c[n]=e,e.timer=r.timer(i,0,e.time)}function f(t,n){var e,r;return function(){var i=s(this,t),o=i.tween;if(o!==e){r=e=o;for(var u=0,a=r.length;u<a;++u)if(r[u].name===n){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function h(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=s(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},c=0,l=i.length;c<l;++c)if(i[c].name===n){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function p(t,n,e){var r=t._id;return t.each(function(){var t=s(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return c(t,r).value[n]}}function d(t){return function(){this.removeAttribute(t)}}function v(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}}function y(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}function g(t,n,e){var r,i,o;return function(){var u,a=e(this);return null==a?void this.removeAttribute(t):(u=this.getAttribute(t),u===a?null:u===r&&a===i?o:o=n(r=u,i=a))}}function m(t,n,e){var r,i,o;return function(){var u,a=e(this);return null==a?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),u===a?null:u===r&&a===i?o:o=n(r=u,i=a))}}function w(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}function x(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e}function b(t,n){return function(){a(this,t).delay=+n.apply(this,arguments);
}}function k(t,n){return n=+n,function(){a(this,t).delay=n}}function E(t,n){return function(){s(this,t).duration=+n.apply(this,arguments)}}function S(t,n){return n=+n,function(){s(this,t).duration=n}}function M(t,n){if("function"!=typeof n)throw new Error;return function(){s(this,t).ease=n}}function A(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}function T(t,n,e){var r,i,o=A(n)?a:s;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}function j(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function N(t,e){var r,i,o;return function(){var u=n.window(this).getComputedStyle(this,null),a=u.getPropertyValue(t),s=(this.style.removeProperty(t),u.getPropertyValue(t));return a===s?null:a===r&&s===i?o:o=e(r=a,i=s)}}function O(t){return function(){this.style.removeProperty(t)}}function P(t,e,r){var i,o;return function(){var u=n.window(this).getComputedStyle(this,null).getPropertyValue(t);return u===r?null:u===i?o:o=e(i=u,r)}}function C(t,e,r){var i,o,u;return function(){var a=n.window(this).getComputedStyle(this,null),s=a.getPropertyValue(t),c=r(this);return null==c&&(this.style.removeProperty(t),c=a.getPropertyValue(t)),s===c?null:s===i&&c===o?u:u=e(i=s,o=c)}}function I(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}function q(t){return function(){this.textContent=t}}function z(t){return function(){var n=t(this);this.textContent=null==n?"":n}}function R(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function L(t){return n.selection().transition(t)}function D(){return++gt}function V(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return wt.time=r.now(),wt;return e}var B=e.dispatch("start","end","interrupt"),F=[],G=0,U=1,H=2,X=3,W=4,K=5,Y=6,$=function(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};l(t,e,{name:n,index:r,group:i,on:B,tween:F,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:G})},J=function(t,n){var e,r,i,o=t.__transition,u=!0;if(o){n=null==n?null:n+"";for(i in o)(e=o[i]).name===n?(r=e.state>H&&e.state<K,e.state=Y,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}},Q=function(t){return this.each(function(){J(this,t)})},Z=function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=c(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?f:h)(e,t,n))},tt=function(t,n){var e;return("number"==typeof n?i.interpolateNumber:n instanceof o.color?i.interpolateRgb:(e=o.color(n))?(n=e,i.interpolateRgb):i.interpolateString)(t,n)},nt=function(t,e){var r=n.namespace(t),o="transform"===r?i.interpolateTransformSvg:tt;return this.attrTween(t,"function"==typeof e?(r.local?m:g)(r,o,p(this,"attr."+t,e)):null==e?(r.local?v:d)(r):(r.local?y:_)(r,o,e))},et=function(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var i=n.namespace(t);return this.tween(r,(i.local?w:x)(i,e))},rt=function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?b:k)(n,t)):c(this.node(),n).delay},it=function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?E:S)(n,t)):c(this.node(),n).duration},ot=function(t){var n=this._id;return arguments.length?this.each(M(n,t)):c(this.node(),n).ease},ut=function(t){"function"!=typeof t&&(t=n.matcher(t));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var u,a=e[o],s=a.length,c=i[o]=[],l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&c.push(u);return new R(i,this._parents,this._name,this._id)},at=function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var s,c=n[a],l=e[a],f=c.length,h=u[a]=new Array(f),p=0;p<f;++p)(s=c[p]||l[p])&&(h[p]=s);for(;a<r;++a)u[a]=n[a];return new R(u,this._parents,this._name,this._id)},st=function(t,n){var e=this._id;return arguments.length<2?c(this.node(),e).on.on(t):this.each(T(e,t,n))},ct=function(){return this.on("end.remove",j(this._id))},lt=function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=n.selector(t));for(var i=this._groups,o=i.length,u=new Array(o),a=0;a<o;++a)for(var s,l,f=i[a],h=f.length,p=u[a]=new Array(h),d=0;d<h;++d)(s=f[d])&&(l=t.call(s,s.__data__,d,f))&&("__data__"in s&&(l.__data__=s.__data__),p[d]=l,$(p[d],e,r,d,p,c(s,r)));return new R(u,this._parents,e,r)},ft=function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=n.selectorAll(t));for(var i=this._groups,o=i.length,u=[],a=[],s=0;s<o;++s)for(var l,f=i[s],h=f.length,p=0;p<h;++p)if(l=f[p]){for(var d,v=t.call(l,l.__data__,p,f),_=c(l,r),y=0,g=v.length;y<g;++y)(d=v[y])&&$(d,e,r,y,v,_);u.push(v),a.push(l)}return new R(u,a,e,r)},ht=n.selection.prototype.constructor,pt=function(){return new ht(this._groups,this._parents)},dt=function(t,n,e){var r="transform"==(t+="")?i.interpolateTransformCss:tt;return null==n?this.styleTween(t,N(t,r)).on("end.style."+t,O(t)):this.styleTween(t,"function"==typeof n?C(t,r,p(this,"style."+t,n)):P(t,r,n),e)},vt=function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,I(t,n,null==e?"":e))},_t=function(t){return this.tween("text","function"==typeof t?z(p(this,"text",t)):q(null==t?"":t+""))},yt=function(){for(var t=this._name,n=this._id,e=D(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],s=a.length,l=0;l<s;++l)if(u=a[l]){var f=c(u,n);$(u,t,e,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new R(r,this._parents,t,e)},gt=0,mt=n.selection.prototype;R.prototype=L.prototype={constructor:R,select:lt,selectAll:ft,filter:ut,merge:at,selection:pt,transition:yt,call:mt.call,nodes:mt.nodes,node:mt.node,size:mt.size,empty:mt.empty,each:mt.each,on:st,attr:nt,attrTween:et,style:dt,styleTween:vt,text:_t,remove:ct,tween:Z,delay:rt,duration:it,ease:ot};var wt={time:null,delay:0,duration:250,ease:u.easeCubicInOut},xt=function(t){var n,e;t instanceof R?(n=t._id,t=t._name):(n=D(),(e=wt).time=r.now(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,u=0;u<o;++u)for(var a,s=i[u],c=s.length,l=0;l<c;++l)(a=s[l])&&$(a,t,n,l,s,e||V(a,n));return new R(i,this._parents,t,n)};n.selection.prototype.interrupt=Q,n.selection.prototype.transition=xt;var bt=[null],kt=function(t,n){var e,r,i=t.__transition;if(i){n=null==n?null:n+"";for(r in i)if((e=i[r]).state>U&&e.name===n)return new R([[t]],bt,n,+r)}return null};t.transition=L,t.active=kt,t.interrupt=J,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,n,e){!function(t,e){e(n)}(this,function(t){"use strict";function n(){for(var t,n=0,r=arguments.length,i={};n<r;++n){if(!(t=arguments[n]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new e(i)}function e(t){this._=t}function r(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function i(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function o(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=u,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}var u={value:function(){}};e.prototype=n.prototype={constructor:e,on:function(t,n){var e,u=this._,a=r(t+"",u),s=-1,c=a.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++s<c;)if(e=(t=a[s]).type)u[e]=o(u[e],t.name,n);else if(null==n)for(e in u)u[e]=o(u[e],t.name,null);return this}for(;++s<c;)if((e=(t=a[s]).type)&&(e=i(u[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new e(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,e=r.length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}},t.dispatch=n,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,n,e){!function(t,e){e(n)}(this,function(t){"use strict";function n(){return m||(b(e),m=x.now()+w)}function e(){m=0}function r(){this._call=this._time=this._next=null}function i(t,n,e){var i=new r;return i.restart(t,n,e),i}function o(){n(),++d;for(var t,e=h;e;)(t=m-e._time)>=0&&e._call.call(null,t),e=e._next;--d}function u(){m=(g=x.now())+w,d=v=0;try{o()}finally{d=0,s(),m=0}}function a(){var t=x.now(),n=t-g;n>y&&(w-=n,g=t)}function s(){for(var t,n,e=h,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:h=n);p=t,c(r)}function c(t){if(!d){v&&(v=clearTimeout(v));var n=t-m;n>24?(t<1/0&&(v=setTimeout(u,n)),_&&(_=clearInterval(_))):(_||(_=setInterval(a,y)),d=1,b(u))}}function l(t,n,e){var i=new r;return n=null==n?0:+n,i.restart(function(e){i.stop(),t(e+n)},n,e),i}function f(t,e,i){var o=new r,u=e;return null==e?(o.restart(t,e,i),o):(e=+e,i=null==i?n():+i,o.restart(function n(r){r+=u,o.restart(n,u+=e,i),t(r)},e,i),o)}var h,p,d=0,v=0,_=0,y=1e3,g=0,m=0,w=0,x="object"==typeof performance&&performance.now?performance:Date,b="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};r.prototype=i.prototype={constructor:r,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?n():+r)+(null==e?0:+e),this._next||p===this||(p?p._next=this:h=this,p=this),this._call=t,this._time=r,c()},stop:function(){this._call&&(this._call=null,this._time=1/0,c())}},t.now=n,t.timer=i,t.timerFlush=o,t.timeout=l,t.interval=f,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,n,e){!function(t,r){r(n,e(15))}(this,function(t,n){"use strict";function e(t,n,e,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*n+(4-6*o+3*u)*e+(1+3*t+3*o-3*u)*r+u*i)/6}function r(t,n){return function(e){return t+e*n}}function i(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function o(t,n){var e=n-t;return e?r(t,e>180||e<-180?e-360*Math.round(e/360):e):A(isNaN(t)?n:t)}function u(t){return 1===(t=+t)?a:function(n,e){return e-n?i(n,e,t):A(isNaN(n)?e:n)}}function a(t,n){var e=n-t;return e?r(t,e):A(isNaN(t)?n:t)}function s(t){return function(e){var r,i,o=e.length,u=new Array(o),a=new Array(o),s=new Array(o);for(r=0;r<o;++r)i=n.rgb(e[r]),u[r]=i.r||0,a[r]=i.g||0,s[r]=i.b||0;return u=t(u),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=u(t),i.g=a(t),i.b=s(t),i+""}}}function c(t){return function(){return t}}function l(t){return function(n){return t(n)+""}}function f(t){return"none"===t?B:(x||(x=document.createElement("DIV"),b=document.documentElement,k=document.defaultView),x.style.transform=t,t=k.getComputedStyle(b.appendChild(x),null).getPropertyValue("transform"),b.removeChild(x),t=t.slice(7,-1).split(","),F(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function h(t){return null==t?B:(E||(E=document.createElementNS("http://www.w3.org/2000/svg","g")),E.setAttribute("transform",t),(t=E.transform.baseVal.consolidate())?(t=t.matrix,F(t.a,t.b,t.c,t.d,t.e,t.f)):B)}function p(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,u,a){if(t!==i||r!==o){var s=u.push("translate(",null,n,null,e);a.push({i:s-4,x:C(t,i)},{i:s-2,x:C(r,o)})}else(i||o)&&u.push("translate("+i+n+o+e)}function u(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:C(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}function a(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:C(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}function s(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:C(t,e)},{i:a-2,x:C(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),o(n.translateX,n.translateY,e.translateX,e.translateY,r,i),u(n.rotate,e.rotate,r,i),a(n.skewX,e.skewX,r,i),s(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){for(var n,e=-1,o=i.length;++e<o;)r[(n=i[e]).i]=n.x(t);return r.join("")}}}function d(t){return((t=Math.exp(t))+1/t)/2}function v(t){return((t=Math.exp(t))-1/t)/2}function _(t){return((t=Math.exp(2*t))-1)/(t+1)}function y(t){return function(e,r){var i=t((e=n.hsl(e)).h,(r=n.hsl(r)).h),o=a(e.s,r.s),u=a(e.l,r.l),s=a(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=u(t),e.opacity=s(t),e+""}}}function g(t,e){var r=a((t=n.lab(t)).l,(e=n.lab(e)).l),i=a(t.a,e.a),o=a(t.b,e.b),u=a(t.opacity,e.opacity);return function(n){return t.l=r(n),t.a=i(n),t.b=o(n),t.opacity=u(n),t+""}}function m(t){return function(e,r){var i=t((e=n.hcl(e)).h,(r=n.hcl(r)).h),o=a(e.c,r.c),u=a(e.l,r.l),s=a(e.opacity,r.opacity);return function(t){return e.h=i(t),e.c=o(t),e.l=u(t),e.opacity=s(t),e+""}}}function w(t){return function e(r){function i(e,i){var o=t((e=n.cubehelix(e)).h,(i=n.cubehelix(i)).h),u=a(e.s,i.s),s=a(e.l,i.l),c=a(e.opacity,i.opacity);return function(t){return e.h=o(t),e.s=u(t),e.l=s(Math.pow(t,r)),e.opacity=c(t),e+""}}return r=+r,i.gamma=e,i}(1)}var x,b,k,E,S=function(t){var n=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),o=t[i],u=t[i+1],a=i>0?t[i-1]:2*o-u,s=i<n-1?t[i+2]:2*u-o;return e((r-i/n)*n,a,o,u,s)}},M=function(t){var n=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*n),o=t[(i+n-1)%n],u=t[i%n],a=t[(i+1)%n],s=t[(i+2)%n];return e((r-i/n)*n,o,u,a,s)}},A=function(t){return function(){return t}},T=function t(e){function r(t,e){var r=i((t=n.rgb(t)).r,(e=n.rgb(e)).r),o=i(t.g,e.g),u=i(t.b,e.b),s=a(t.opacity,e.opacity);return function(n){return t.r=r(n),t.g=o(n),t.b=u(n),t.opacity=s(n),t+""}}var i=u(e);return r.gamma=t,r}(1),j=s(S),N=s(M),O=function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),u=new Array(r);for(e=0;e<i;++e)o[e]=L(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}},P=function(t,n){var e=new Date;return t=+t,n-=t,function(r){return e.setTime(t+n*r),e}},C=function(t,n){return t=+t,n-=t,function(e){return t+n*e}},I=function(t,n){var e,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={});for(e in n)e in t?r[e]=L(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,z=new RegExp(q.source,"g"),R=function(t,n){var e,r,i,o=q.lastIndex=z.lastIndex=0,u=-1,a=[],s=[];for(t+="",n+="";(e=q.exec(t))&&(r=z.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,s.push({i:u,x:C(e,r)})),o=z.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?s[0]?l(s[0].x):c(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)a[(e=s[r]).i]=e.x(t);return a.join("")})},L=function(t,e){var r,i=typeof e;return null==e||"boolean"===i?A(e):("number"===i?C:"string"===i?(r=n.color(e))?(e=r,T):R:e instanceof n.color?T:e instanceof Date?P:Array.isArray(e)?O:isNaN(e)?I:C)(t,e)},D=function(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}},V=180/Math.PI,B={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},F=function(t,n,e,r,i,o){var u,a,s;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(s=t*e+n*r)&&(e-=t*s,r-=n*s),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,s/=a),t*r<n*e&&(t=-t,n=-n,s=-s,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*V,skewX:Math.atan(s)*V,scaleX:u,scaleY:a}},G=p(f,"px, ","px)","deg)"),U=p(h,", ",")",")"),H=Math.SQRT2,X=2,W=4,K=1e-12,Y=function(t,n){var e,r,i=t[0],o=t[1],u=t[2],a=n[0],s=n[1],c=n[2],l=a-i,f=s-o,h=l*l+f*f;if(h<K)r=Math.log(c/u)/H,e=function(t){return[i+t*l,o+t*f,u*Math.exp(H*t*r)]};else{var p=Math.sqrt(h),y=(c*c-u*u+W*h)/(2*u*X*p),g=(c*c-u*u-W*h)/(2*c*X*p),m=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(g*g+1)-g);r=(w-m)/H,e=function(t){var n=t*r,e=d(m),a=u/(X*p)*(e*_(H*n+m)-v(m));return[i+a*l,o+a*f,u*e/d(H*n+m)]}}return e.duration=1e3*r,e},$=y(o),J=y(a),Q=m(o),Z=m(a),tt=w(o),nt=w(a),et=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e};t.interpolate=L,t.interpolateArray=O,t.interpolateBasis=S,t.interpolateBasisClosed=M,t.interpolateDate=P,t.interpolateNumber=C,t.interpolateObject=I,t.interpolateRound=D,t.interpolateString=R,t.interpolateTransformCss=G,t.interpolateTransformSvg=U,t.interpolateZoom=Y,t.interpolateRgb=T,t.interpolateRgbBasis=j,t.interpolateRgbBasisClosed=N,t.interpolateHsl=$,t.interpolateHslLong=J,t.interpolateLab=g,t.interpolateHcl=Q,t.interpolateHclLong=Z,t.interpolateCubehelix=tt,t.interpolateCubehelixLong=nt,t.quantize=et,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,n,e){!function(t,e){e(n)}(this,function(t){"use strict";function n(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function e(){}function r(t){var n;return t=(t+"").trim().toLowerCase(),(n=C.exec(t))?(n=parseInt(n[1],16),new s(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1)):(n=I.exec(t))?i(parseInt(n[1],16)):(n=q.exec(t))?new s(n[1],n[2],n[3],1):(n=z.exec(t))?new s(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=R.exec(t))?o(n[1],n[2],n[3],n[4]):(n=L.exec(t))?o(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=D.exec(t))?c(n[1],n[2]/100,n[3]/100,1):(n=V.exec(t))?c(n[1],n[2]/100,n[3]/100,n[4]):B.hasOwnProperty(t)?i(B[t]):"transparent"===t?new s(NaN,NaN,NaN,0):null}function i(t){return new s(t>>16&255,t>>8&255,255&t,1)}function o(t,n,e,r){return r<=0&&(t=n=e=NaN),new s(t,n,e,r)}function u(t){return t instanceof e||(t=r(t)),t?(t=t.rgb(),new s(t.r,t.g,t.b,t.opacity)):new s}function a(t,n,e,r){return 1===arguments.length?u(t):new s(t,n,e,null==r?1:r)}function s(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function c(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new h(t,n,e,r)}function l(t){if(t instanceof h)return new h(t.h,t.s,t.l,t.opacity);if(t instanceof e||(t=r(t)),!t)return new h;if(t instanceof h)return t;t=t.rgb();var n=t.r/255,i=t.g/255,o=t.b/255,u=Math.min(n,i,o),a=Math.max(n,i,o),s=NaN,c=a-u,l=(a+u)/2;return c?(s=n===a?(i-o)/c+6*(i<o):i===a?(o-n)/c+2:(n-i)/c+4,c/=l<.5?a+u:2-a-u,s*=60):c=l>0&&l<1?0:s,new h(s,c,l,t.opacity)}function f(t,n,e,r){return 1===arguments.length?l(t):new h(t,n,e,null==r?1:r)}function h(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function p(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function d(t){if(t instanceof _)return new _(t.l,t.a,t.b,t.opacity);if(t instanceof k){var n=t.h*F;return new _(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof s||(t=u(t));var e=w(t.r),r=w(t.g),i=w(t.b),o=y((.4124564*e+.3575761*r+.1804375*i)/H),a=y((.2126729*e+.7151522*r+.072175*i)/X),c=y((.0193339*e+.119192*r+.9503041*i)/W);return new _(116*a-16,500*(o-a),200*(a-c),t.opacity)}function v(t,n,e,r){return 1===arguments.length?d(t):new _(t,n,e,null==r?1:r)}function _(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function y(t){return t>J?Math.pow(t,1/3):t/$+K}function g(t){return t>Y?t*t*t:$*(t-K)}function m(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function w(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function x(t){if(t instanceof k)return new k(t.h,t.c,t.l,t.opacity);t instanceof _||(t=d(t));var n=Math.atan2(t.b,t.a)*G;return new k(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function b(t,n,e,r){return 1===arguments.length?x(t):new k(t,n,e,null==r?1:r)}function k(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function E(t){if(t instanceof M)return new M(t.h,t.s,t.l,t.opacity);t instanceof s||(t=u(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(ot*r+rt*n-it*e)/(ot+rt-it),o=r-i,a=(et*(e-i)-tt*o)/nt,c=Math.sqrt(a*a+o*o)/(et*i*(1-i)),l=c?Math.atan2(a,o)*G-120:NaN;return new M(l<0?l+360:l,c,i,t.opacity)}function S(t,n,e,r){return 1===arguments.length?E(t):new M(t,n,e,null==r?1:r)}function M(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}var A=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t},T=.7,j=1/T,N="\\s*([+-]?\\d+)\\s*",O="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C=/^#([0-9a-f]{3})$/,I=/^#([0-9a-f]{6})$/,q=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),z=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),R=new RegExp("^rgba\\("+[N,N,N,O]+"\\)$"),L=new RegExp("^rgba\\("+[P,P,P,O]+"\\)$"),D=new RegExp("^hsl\\("+[O,P,P]+"\\)$"),V=new RegExp("^hsla\\("+[O,P,P,O]+"\\)$"),B={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};A(e,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),A(s,a,n(e,{brighter:function(t){return t=null==t?j:Math.pow(j,t),new s(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?T:Math.pow(T,t),new s(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),A(h,f,n(e,{brighter:function(t){return t=null==t?j:Math.pow(j,t),new h(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?T:Math.pow(T,t),new h(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new s(p(t>=240?t-240:t+120,i,r),p(t,i,r),p(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var F=Math.PI/180,G=180/Math.PI,U=18,H=.95047,X=1,W=1.08883,K=4/29,Y=6/29,$=3*Y*Y,J=Y*Y*Y;A(_,v,n(e,{brighter:function(t){return new _(this.l+U*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new _(this.l-U*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return t=X*g(t),n=H*g(n),e=W*g(e),new s(m(3.2404542*n-1.5371385*t-.4985314*e),m(-.969266*n+1.8760108*t+.041556*e),m(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}})),A(k,b,n(e,{brighter:function(t){return new k(this.h,this.c,this.l+U*(null==t?1:t),this.opacity)},darker:function(t){return new k(this.h,this.c,this.l-U*(null==t?1:t),this.opacity)},rgb:function(){return d(this).rgb()}}));var Q=-.14861,Z=1.78277,tt=-.29227,nt=-.90649,et=1.97294,rt=et*nt,it=et*Z,ot=Z*tt-nt*Q;A(M,S,n(e,{brighter:function(t){return t=null==t?j:Math.pow(j,t),new M(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?T:Math.pow(T,t),new M(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*F,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new s(255*(n+e*(Q*r+Z*i)),255*(n+e*(tt*r+nt*i)),255*(n+e*(et*r)),this.opacity)}})),t.color=r,t.rgb=a,t.hsl=f,t.lab=v,t.hcl=b,t.cubehelix=S,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,n,e){!function(t,e){e(n)}(this,function(t){"use strict";function n(t){return+t}function e(t){return t*t}function r(t){return t*(2-t)}function i(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function o(t){return t*t*t}function u(t){return--t*t*t+1}function a(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function s(t){return 1-Math.cos(t*S)}function c(t){return Math.sin(t*S)}function l(t){return(1-Math.cos(E*t))/2}function f(t){return Math.pow(2,10*t-10)}function h(t){return 1-Math.pow(2,-10*t)}function p(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function d(t){return 1-Math.sqrt(1-t*t)}function v(t){return Math.sqrt(1- --t*t)}function _(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function y(t){return 1-g(1-t)}function g(t){return(t=+t)<M?q*t*t:t<T?q*(t-=A)*t+j:t<O?q*(t-=N)*t+P:q*(t-=C)*t+I}function m(t){return((t*=2)<=1?1-g(1-t):g(t-1)+1)/2}var w=3,x=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(w),b=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(w),k=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(w),E=Math.PI,S=E/2,M=4/11,A=6/11,T=8/11,j=.75,N=9/11,O=10/11,P=.9375,C=21/22,I=63/64,q=1/M/M,z=1.70158,R=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(z),L=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(z),D=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(z),V=2*Math.PI,B=1,F=.3,G=function t(n,e){function r(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=V);return r.amplitude=function(n){return t(n,e*V)},r.period=function(e){return t(n,e)},r}(B,F),U=function t(n,e){function r(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=V);return r.amplitude=function(n){return t(n,e*V)},r.period=function(e){return t(n,e)},r}(B,F),H=function t(n,e){function r(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/e))/2}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=V);return r.amplitude=function(n){return t(n,e*V)},r.period=function(e){return t(n,e)},r}(B,F);t.easeLinear=n,t.easeQuad=i,t.easeQuadIn=e,t.easeQuadOut=r,t.easeQuadInOut=i,t.easeCubic=a,t.easeCubicIn=o,t.easeCubicOut=u,t.easeCubicInOut=a,t.easePoly=k,t.easePolyIn=x,t.easePolyOut=b,t.easePolyInOut=k,t.easeSin=l,t.easeSinIn=s,t.easeSinOut=c,t.easeSinInOut=l,t.easeExp=p,t.easeExpIn=f,t.easeExpOut=h,t.easeExpInOut=p,t.easeCircle=_,t.easeCircleIn=d,t.easeCircleOut=v,t.easeCircleInOut=_,t.easeBounce=g,t.easeBounceIn=y,t.easeBounceOut=g,t.easeBounceInOut=m,t.easeBack=D,t.easeBackIn=R,t.easeBackOut=L,t.easeBackInOut=D,t.easeElastic=U,t.easeElasticIn=G,t.easeElasticOut=U,t.easeElasticInOut=H,Object.defineProperty(t,"__esModule",{value:!0})})}]);
//# sourceMappingURL=view.umd-es2015.min.js.map